  <!-- Skip to main content link for keyboard users -->
  <a href="#app" class="skip-to-content">Skip to main content</a>

  <!-- Status Widgets Container (top-right corner) -->
  <div class="status-widgets" id="status-widgets">
    <!-- Uptime Status Badge (shields.io - always visible) -->
    <a href="https://spotify.houstons.tech/health" target="_blank" class="uptime-status-badge" id="uptime-badge" title="Service Status" aria-label="View service status">
      <img src="https://img.shields.io/website?url=https%3A%2F%2Fspotify.houstons.tech&style=flat-square&logo=spotify&logoColor=white&label=Status&up_color=1DB954&down_color=e74c3c&labelColor=191414" alt="Service Status" loading="lazy" onerror="this.parentElement.style.display='none'">
    </a>

    <!-- Deployment Monitor Widget -->
    <button class="deploy-widget" id="deploy-widget" style="display: none;" aria-label="View deployment status">
      <span class="status-icon" aria-hidden="true"></span>
      <span class="deploy-text">Checking...</span>
    </button>

    <!-- KV Status Indicator (hidden by default, shown for owner) -->
    <button class="kv-status-indicator" id="kv-status-indicator" style="display: none;" aria-label="View KV storage status">
      <span class="kv-icon" aria-hidden="true">ğŸ“Š</span>
      <span class="kv-text">KV: ...</span>
    </button>
  </div>

  <!-- Now Playing Widget -->
  <div class="now-playing-widget" id="now-playing-widget" style="display: none;" role="region" aria-label="Now playing">
    <button class="now-playing-dismiss" id="now-playing-dismiss" aria-label="Hide now playing" title="Hide">Ã—</button>
    <div class="now-playing-art">
      <img id="now-playing-art" src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" alt="">
      <div class="now-playing-equalizer" aria-hidden="true">
        <span></span><span></span><span></span>
      </div>
    </div>
    <div class="now-playing-info">
      <div class="now-playing-track" id="now-playing-track" aria-live="polite">Not playing</div>
      <div class="now-playing-artist" id="now-playing-artist" aria-live="polite"></div>
      <div class="now-playing-progress">
        <div class="now-playing-progress-bar" role="progressbar" aria-label="Playback progress" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
          <div class="now-playing-progress-fill" id="now-playing-progress"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- SVG Gradient Definition for Swedish mode -->
  <svg style="position:absolute;width:0;height:0;">
    <defs>
      <linearGradient id="swedish-grad" x1="0%" y1="0%" x2="100%" y2="100%">
        <stop offset="0%" style="stop-color:#006AA7"/>
        <stop offset="50%" style="stop-color:#FECC00"/>
        <stop offset="100%" style="stop-color:#006AA7"/>
      </linearGradient>
    </defs>
  </svg>

  <!-- Viking ship Easter egg (only in Swedish mode) -->
  <div class="viking-ship" title="Vikingaskepp!">â›µ</div>

  <div class="app-wrapper">
    <header class="app-header">
      <div class="header-content">
        <h1>
          <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true" role="img" aria-label="Spotify logo">
            <path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm4.586 14.424a.622.622 0 01-.857.207c-2.348-1.435-5.304-1.76-8.785-.964a.622.622 0 01-.277-1.215c3.809-.87 7.076-.496 9.712 1.115.293.18.386.563.207.857zm1.223-2.722a.78.78 0 01-1.072.257c-2.687-1.652-6.785-2.131-9.965-1.166a.78.78 0 01-.973-.519.781.781 0 01.52-.972c3.632-1.102 8.147-.568 11.233 1.329a.78.78 0 01.257 1.071zm.105-2.835c-3.223-1.914-8.54-2.09-11.618-1.156a.935.935 0 11-.543-1.79c3.533-1.072 9.404-.865 13.115 1.338a.935.935 0 11-.954 1.608z"/>
          </svg>
          <span data-i18n="title">Genre Genie</span>
          <span class="genie-sparkle" aria-hidden="true">âœ¨</span>
        </h1>
        <span class="swedish-crowns" aria-label="Tre Kronor - Three Crowns of Sweden" aria-hidden="true">
          <span class="crown">ğŸ‘‘</span>
          <span class="crown">ğŸ‘‘</span>
          <span class="crown">ğŸ‘‘</span>
        </span>
        <div id="header-actions"></div>
      </div>
    </header>

    <div class="content-wrapper">
      <!-- Left Sidebar -->
      <aside class="sidebar" id="sidebar" data-testid="sidebar" aria-label="Community statistics and playlists">
        <div class="sidebar-section">
          <h2 class="sidebar-title" title="Updates every 15 minutes to save API calls"><span aria-hidden="true">ğŸ†</span> <span data-i18n="pioneers">Pioneers</span></h2>
          <div class="pioneers-list" id="pioneers-list" role="list" aria-label="Pioneer users">
            <div class="sidebar-loading" role="status" aria-live="polite">Loading...</div>
          </div>
        </div>

        <div class="sidebar-section">
          <h2 class="sidebar-title" title="Updates every 15 minutes to save API calls"><span aria-hidden="true">ğŸ‘‹</span> <span data-i18n="newUsers">New Users</span></h2>
          <div class="new-users-list" id="new-users-list" role="list" aria-label="New users">
            <div class="sidebar-loading" role="status" aria-live="polite">Loading...</div>
          </div>
        </div>

        <div class="sidebar-section">
          <h2 class="sidebar-title" title="Live listening activity"><span aria-hidden="true">ğŸ§</span> <span data-i18n="nowListening">Now Listening</span></h2>
          <div class="now-listening-list" id="now-listening-list" role="list" aria-label="Currently listening users">
            <div class="sidebar-loading" role="status" aria-live="polite">Loading...</div>
          </div>
        </div>

        <div class="sidebar-section">
          <h2 class="sidebar-title" title="Refreshes every 3 minutes"><span aria-hidden="true">ğŸµ</span> <span data-i18n="recentPlaylists">Recent Playlists</span></h2>
          <div class="recent-playlists-list" id="recent-playlists-list" role="list" aria-label="Recently created playlists">
            <div class="sidebar-loading" role="status" aria-live="polite">Loading...</div>
          </div>
        </div>

        <button class="btn btn-secondary sidebar-scoreboard-btn" id="scoreboard-btn" data-testid="scoreboard-btn" aria-label="View Scoreboard - Rankings update every hour">
          <span aria-hidden="true">ğŸ“Š</span> <span data-i18n="viewScoreboard">View Scoreboard</span>
        </button>

        <!-- Donation button moved to sidebar -->
        <a href="https://buymeacoffee.com/tomstech" target="_blank" rel="noopener noreferrer" class="sidebar-donate-btn" id="donation-btn" aria-label="Support the project - Buy me a coffee">
          <span class="icon" aria-hidden="true">ğŸš¬</span>
          <span class="text">Shout me a durry <sup class="bryan-text">do it for bryan</sup></span>
        </a>
      </aside>

      <!-- Mobile sidebar toggle -->
      <button class="sidebar-toggle" id="sidebar-toggle" aria-label="Toggle sidebar">
        <span class="toggle-icon">â—€</span>
      </button>

      <!-- Main Content -->
      <main id="app" class="main-content" role="main" aria-label="Genre playlists">
        <div class="loading" role="status" aria-live="polite" aria-label="Loading application">
          <div class="spinner" aria-hidden="true"></div>
          <span data-i18n="loading">Loading...</span>
        </div>
      </main>
    </div>
  </div>

  <!-- Floating Genie Mascot -->
  <div class="genie-mascot" id="genie-mascot" aria-label="Genre Genie mascot" role="img" aria-hidden="true">
    ğŸ§
  </div>

  <!-- Heidi Easter Egg Badge -->
  <button class="heidi-badge" id="heidi-badge" data-testid="heidi-badge" aria-label="Toggle Swedish mode - Made with inspiration from Heidi">
    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
      <circle cx="12" cy="8" r="4"/>
      <path d="M4 20c0-4 4-6 8-6s8 2 8 6"/>
      <path d="M9 4c1-2 5-2 6 0" stroke="#FECC00"/>
    </svg>
    <span class="heidi-text" aria-hidden="true">
      <span>Made with inspiration from</span>
      <span><strong>Heidi</strong> <span class="heart">â™¥</span></span>
    </span>
  </button>
