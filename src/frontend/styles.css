    :root {
      --bg: #0a0a0a;
      --surface: #141414;
      --surface-2: #1e1e1e;
      --card-bg: #181818;
      --border: #2a2a2a;
      --border-hover: #3a3a3a;
      --text: #fafafa;
      --text-muted: #9a9a9a; /* Improved contrast: 5.9:1 on #141414 */
      --accent: #1DB954;
      --accent-hover: #1ed760;
      --primary-rgb: 29, 185, 84;
      --danger: #e74c3c;
      --danger-rgb: 231, 76, 60;
      --swedish-blue: #006AA7;
      --swedish-yellow: #FECC00;
    }

    /* Light mode theme - WCAG AA compliant */
    body.light-mode {
      --bg: #f5f5f5;
      --surface: #ffffff;
      --surface-2: #e9ecef;
      --card-bg: #ffffff;
      --border: #ced4da;
      --border-hover: #adb5bd;
      --text: #1a1a1a;
      --text-muted: #495057;
    }

    /* Light mode specific overrides for accessibility */
    body.light-mode .stat {
      border: 1px solid var(--border);
    }

    body.light-mode .genre-item {
      border: 1px solid var(--border);
    }

    body.light-mode .genre-count {
      border: 1px solid var(--border);
      color: var(--text);
    }

    body.light-mode .btn-ghost {
      color: var(--text);
    }

    body.light-mode .btn-ghost:hover {
      background: var(--surface-2);
    }

    body.light-mode .btn-secondary {
      background: var(--surface);
    }

    body.light-mode .search-input {
      border: 2px solid var(--border);
    }

    body.light-mode .search-input:focus {
      border-color: var(--accent);
    }

    body.light-mode .template-settings {
      border: 1px solid var(--border);
    }

    body.light-mode .hidden-toolbar {
      border: 1px solid var(--border);
    }

    body.light-mode .stats-dashboard {
      border: 1px solid var(--border);
    }

    body.light-mode .deploy-widget {
      border: 1px solid var(--border);
      background: var(--surface);
    }

    body.light-mode .heidi-badge {
      border: 1px solid var(--border);
      background: var(--surface);
    }

    body.light-mode .user-counter {
      border: 1px solid var(--border);
    }

    body.light-mode .hof-entry {
      border: 1px solid var(--border);
    }

    body.light-mode .loading-stat {
      border: 1px solid var(--border);
    }

    body.light-mode .live-genre-card {
      border: 1px solid var(--border);
    }

    body.light-mode .progress-bar,
    body.light-mode .progress-bar-full {
      border: 1px solid var(--border);
    }

    body.light-mode .modal {
      background: var(--surface);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    }

    body.light-mode .keyboard-help-panel {
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    }

    body.light-mode .changelog-panel {
      background: var(--surface);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.15);
    }

    body.light-mode .stat-box {
      border: 1px solid var(--border);
    }

    body.light-mode .genre-bar-track,
    body.light-mode .genre-bar-container {
      border: 1px solid var(--border);
    }

    body.light-mode .durry-btn {
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    /* Skip to main content link - visible only when focused */
    .skip-to-content {
      position: absolute;
      top: -100px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--accent);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: 0 0 8px 8px;
      font-weight: 600;
      text-decoration: none;
      z-index: 10000;
      transition: top 0.2s ease;
    }

    .skip-to-content:focus {
      top: 0;
      outline: 3px solid white;
      outline-offset: 2px;
    }

    /* Clickable widget buttons - need button styling reset */
    .deploy-widget,
    .kv-status-indicator,
    .heidi-badge {
      border: none;
      background: transparent;
      font: inherit;
      cursor: pointer;
      text-align: left;
      padding: 0;
      display: inline-flex;
      align-items: center;
    }

    .deploy-widget:focus-visible,
    .kv-status-indicator:focus-visible,
    .heidi-badge:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
      border-radius: 4px;
    }

    body.swedish-mode {
      --accent: #006AA7;
      --accent-hover: #0077b6;
      --bg: #001428;
      --surface: #002244;
      --surface-2: #003366;
      --border: #004488;
    }

    /* Swedish mode in light theme */
    body.swedish-mode.light-mode {
      --bg: #f0f4f8;
      --surface: #ffffff;
      --surface-2: #e8f0f8;
      --border: #b8d4e8;
    }

    body.swedish-mode .stat-value {
      background: linear-gradient(135deg, var(--swedish-blue), var(--swedish-yellow));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    body.swedish-mode .btn-primary {
      background: linear-gradient(135deg, var(--swedish-blue), var(--swedish-yellow));
    }

    body.swedish-mode header h1 svg {
      fill: url(#swedish-grad);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: var(--bg);
      color: var(--text);
      min-height: 100vh;
      line-height: 1.6;
      transition: all 0.3s ease;
    }

    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem;
    }

    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 3rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    h1 {
      font-size: 1.5rem;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .avatar {
      width: 36px;
      height: 36px;
      border-radius: 50%;
    }

    .btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.625rem 1.25rem;
      border-radius: 6px;
      border: none;
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.15s ease;
      text-decoration: none;
    }

    .btn-primary {
      background: var(--accent);
      color: #000;
    }

    .btn-primary:hover {
      background: var(--accent-hover);
    }

    .btn-secondary {
      background: var(--surface-2);
      color: var(--text);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--border);
    }

    .btn-ghost {
      background: transparent;
      color: var(--text-muted);
    }

    .btn-ghost:hover {
      color: var(--text);
    }

    .btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .card {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .card-title {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .stat {
      background: var(--surface-2);
      padding: 1rem;
      border-radius: 6px;
      text-align: center;
    }

    .stat-value {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--accent);
    }

    .stat-label {
      font-size: 0.75rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .truncation-warning {
      background: rgba(255, 193, 7, 0.15);
      border: 1px solid rgba(255, 193, 7, 0.4);
      border-radius: 8px;
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
      font-size: 0.85rem;
      color: var(--text);
      text-align: center;
    }

    body.light-mode .truncation-warning {
      background: rgba(255, 193, 7, 0.2);
    }

    .cache-status {
      display: flex;
      align-items: center;
      justify-content: flex-end;
      gap: 0.75rem;
      margin-bottom: 1rem;
      font-size: 0.75rem;
    }

    .cache-info {
      color: var(--text-muted);
    }

    .btn-sm {
      padding: 0.4rem 0.75rem;
      font-size: 0.85rem;
      min-height: 32px;
    }

    body.swedish-mode .cache-status .btn {
      background: var(--swedish-blue);
    }

    /* Select all row above genre list */
    .select-all-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.5rem 0.75rem;
      margin-bottom: 0.5rem;
      background: var(--surface-2);
      border-radius: 6px;
      border-bottom: 1px solid var(--border);
    }

    .select-all-label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: pointer;
      font-weight: 500;
      color: var(--text);
    }

    .select-all-label input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: var(--accent);
      cursor: pointer;
    }

    .selection-info {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .genre-list {
      display: grid;
      gap: 0.5rem;
      max-height: 500px;
      overflow-y: auto;
    }

    .genre-item {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.75rem 1rem;
      background: var(--surface-2);
      border-radius: 6px;
      transition: background 0.15s ease;
    }

    .genre-item:hover {
      background: var(--border);
    }

    .genre-checkbox {
      width: 18px;
      height: 18px;
      accent-color: var(--accent);
    }

    .genre-name {
      flex: 1;
      font-size: 0.9rem;
    }

    .genre-count {
      font-size: 0.8rem;
      color: var(--text-muted);
      background: var(--surface);
      padding: 0.25rem 0.5rem;
      border-radius: 4px;
    }

    .genre-create {
      opacity: 0;
      transition: opacity 0.15s ease;
    }

    .genre-item:hover .genre-create,
    .genre-item:hover .genre-hide {
      opacity: 1;
    }

    .genre-hide {
      opacity: 0;
      transition: opacity 0.15s ease;
      padding: 0.25rem 0.5rem;
      font-size: 0.75rem;
    }

    .genre-item.hidden {
      opacity: 0.5;
      background: var(--surface);
    }

    .genre-item.hidden .genre-name {
      text-decoration: line-through;
    }

    /* Hidden genres toolbar */
    .hidden-toolbar {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
      padding: 0.75rem;
      background: var(--surface);
      border-radius: 6px;
      border: 1px solid var(--border);
      align-items: center;
    }

    .hidden-toolbar label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.85rem;
      cursor: pointer;
    }

    .hidden-count {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-left: auto;
    }

    .actions {
      display: flex;
      gap: 1rem;
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border);
    }

    /* Playlist Template Settings */
    .template-settings {
      margin-bottom: 1rem;
      padding: 1rem;
      background: var(--surface);
      border-radius: 6px;
      border: 1px solid var(--border);
    }

    .template-settings label {
      display: block;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .template-input-row {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .template-input-row input {
      flex: 1;
    }

    .template-preview {
      margin-top: 0.5rem;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .template-preview span {
      color: var(--accent);
      font-weight: 500;
    }

    .loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 3rem;
      color: var(--text-muted);
    }

    .spinner {
      width: 32px;
      height: 32px;
      border: 3px solid var(--border);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
      margin-bottom: 1rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .loading-sub {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 0.5rem;
      opacity: 0.7;
    }

    /* Progressive loading progress bar */
    .progress-container {
      width: 100%;
      max-width: 300px;
      margin-top: 1rem;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--border);
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: var(--accent);
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .progress-text {
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-top: 0.5rem;
    }

    /* Modal dialog styles */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      animation: fadeIn 0.2s ease;
    }

    .modal {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      max-width: 400px;
      width: 90%;
      animation: slideUp 0.3s ease;
    }

    .modal h3 {
      margin: 0 0 1rem;
      color: var(--text);
    }

    .modal p {
      margin: 0 0 1rem;
      color: var(--text);
    }

    .modal-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
      margin-top: 1.5rem;
    }

    /* Custom prompt modal (replaces native prompt()) */
    .prompt-modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      animation: fadeIn 0.2s ease;
    }

    .prompt-modal {
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.5rem;
      max-width: 400px;
      width: 90%;
      animation: slideUp 0.3s ease;
    }

    .prompt-modal h3 {
      margin: 0 0 0.75rem;
      color: var(--text);
      font-size: 1.1rem;
    }

    .prompt-message {
      margin: 0 0 1rem;
      color: var(--text-muted);
      font-size: 0.95rem;
    }

    .prompt-input {
      width: 100%;
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: var(--surface);
      color: var(--text);
      font-size: 1rem;
      margin-bottom: 1rem;
    }

    .prompt-input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 2px rgba(29, 185, 84, 0.2);
    }

    .prompt-buttons {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
    }

    /* Playlist Customize Modal */
    .playlist-customize-modal {
      max-width: 500px;
    }

    .form-group {
      margin-bottom: 1.25rem;
    }

    .form-group label {
      display: block;
      margin-bottom: 0.5rem;
      font-weight: 600;
      color: var(--text);
      font-size: 0.9rem;
    }

    .form-group input,
    .form-group textarea {
      width: 100%;
      padding: 0.75rem;
      border: 2px solid var(--border);
      border-radius: 6px;
      background: var(--surface);
      color: var(--text);
      font-family: inherit;
      font-size: 0.95rem;
      transition: border-color 0.2s;
    }

    .form-group input:focus,
    .form-group textarea:focus {
      outline: none;
      border-color: var(--accent);
    }

    .form-group textarea {
      resize: vertical;
      min-height: 80px;
    }

    .playlist-preview {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 1rem;
      background: var(--surface-2);
      border-radius: 8px;
      margin: 1rem 0;
    }

    .preview-icon {
      font-size: 2.5rem;
      line-height: 1;
    }

    .preview-info {
      flex: 1;
    }

    .preview-tracks {
      font-weight: 600;
      color: var(--text);
      margin-bottom: 0.25rem;
    }

    .preview-hint {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .char-count {
      text-align: right;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes slideUp {
      from { transform: translateY(20px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .error {
      background: rgba(231, 76, 60, 0.1);
      border: 1px solid var(--danger);
      color: var(--danger);
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 1rem;
      text-align: center;
    }

    .error strong {
      display: block;
      margin-bottom: 0.5rem;
    }

    .error p {
      margin: 0.5rem 0;
    }

    .error-detail {
      font-size: 0.8rem;
      opacity: 0.8;
      font-family: monospace;
    }

    .success {
      background: rgba(29, 185, 84, 0.1);
      border: 1px solid var(--accent);
      color: var(--accent);
      padding: 1rem;
      border-radius: 6px;
      margin-bottom: 1rem;
    }

    .welcome {
      text-align: center;
      padding: 2rem 2rem;
      max-width: 500px;
      margin: 0 auto;
    }

    .welcome h2 {
      font-size: 2rem;
      margin-bottom: 1rem;
    }

    .welcome p {
      color: var(--text-muted);
      margin-bottom: 2rem;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }

    /* Privacy Explainer - Collapsible permissions info */
    .privacy-explainer {
      text-align: left;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      margin: 1.5rem 0;
      overflow: hidden;
    }

    .privacy-explainer summary {
      padding: 0.75rem 1rem;
      cursor: pointer;
      font-weight: 500;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: color 0.2s;
    }

    .privacy-explainer summary:hover {
      color: var(--text);
    }

    .privacy-explainer summary::marker {
      color: var(--accent);
    }

    .privacy-explainer[open] summary {
      border-bottom: 1px solid var(--border);
      color: var(--text);
    }

    .privacy-grid {
      padding: 1rem;
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .privacy-item {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 0.5rem;
      border-radius: 6px;
      background: var(--surface-2);
    }

    .privacy-icon {
      font-size: 1.25rem;
      flex-shrink: 0;
      width: 2rem;
      text-align: center;
    }

    .privacy-item div {
      display: flex;
      flex-direction: column;
      gap: 0.125rem;
    }

    .privacy-item strong {
      font-size: 0.875rem;
      color: var(--text);
    }

    .privacy-item span {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .privacy-permission {
      border-left: 3px solid var(--accent);
    }

    .privacy-reassurance {
      border-left: 3px solid var(--swedish-blue);
    }

    .privacy-divider {
      height: 1px;
      background: var(--border);
      margin: 0.5rem 0;
    }

    .privacy-docs-link {
      display: block;
      text-align: center;
      padding: 0.75rem 1rem;
      color: var(--text-muted);
      text-decoration: none;
      font-size: 0.8rem;
      border-top: 1px solid var(--border);
      transition: color 0.2s, background 0.2s;
    }

    .privacy-docs-link:hover {
      color: var(--accent);
      background: var(--surface-2);
    }

    /* Light mode overrides for privacy section */
    body.light-mode .privacy-explainer {
      border: 1px solid var(--border);
    }

    body.light-mode .privacy-item {
      border: 1px solid var(--border);
    }

    .search-input {
      width: 100%;
      padding: 0.75rem 1rem;
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 6px;
      color: var(--text);
      font-size: 0.9rem;
      margin-bottom: 1rem;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--accent);
    }

    .search-input::placeholder {
      color: var(--text-muted);
    }

    .results {
      margin-top: 1rem;
    }

    .result-item {
      display: flex;
      justify-content: space-between;
      padding: 0.5rem 0;
      border-bottom: 1px solid var(--border);
    }

    .result-item:last-child {
      border-bottom: none;
    }

    .result-success {
      color: var(--accent);
    }

    .result-error {
      color: var(--danger);
    }

    .result-skipped {
      color: var(--text-muted);
      font-style: italic;
    }

    /* Heidi Easter Egg Badge */
    .heidi-badge {
      position: fixed;
      bottom: 1rem;
      right: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 0.75rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 20px;
      font-size: 0.7rem;
      color: var(--text-muted);
      cursor: pointer;
      transition: all 0.3s ease;
      z-index: 100;
      opacity: 0.6;
    }

    .heidi-badge:hover {
      opacity: 1;
      transform: scale(1.05);
      border-color: var(--swedish-yellow);
      box-shadow: 0 0 20px rgba(254, 204, 0, 0.2);
    }

    .heidi-badge svg {
      width: 20px;
      height: 20px;
    }

    .heidi-badge .heidi-text {
      display: flex;
      flex-direction: column;
      line-height: 1.2;
    }

    .heidi-badge .heart {
      color: #e74c3c;
      animation: pulse 1.5s ease infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }

    body.swedish-mode .heidi-badge {
      background: linear-gradient(135deg, var(--swedish-blue), var(--swedish-yellow));
      color: #fff;
      opacity: 1;
    }

    /* Swedish mode decorations - Three Crowns (Tre Kronor) */
    .swedish-crowns {
      display: none;
      gap: 0.25rem;
      margin-left: 0.5rem;
      font-size: 1.2rem;
    }

    body.swedish-mode .swedish-crowns {
      display: flex;
    }

    .swedish-crowns .crown {
      animation: float 2s ease-in-out infinite;
    }

    .swedish-crowns .crown:nth-child(1) {
      animation-delay: 0s;
    }

    .swedish-crowns .crown:nth-child(2) {
      animation-delay: 0.3s;
      font-size: 1.4rem;
      margin-top: -3px;
    }

    .swedish-crowns .crown:nth-child(3) {
      animation-delay: 0.6s;
    }

    @keyframes float {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-5px); }
    }

    .viking-ship {
      display: none;
      position: fixed;
      bottom: 60px;
      left: -100px;
      font-size: 2rem;
      animation: sail 15s linear infinite;
    }

    body.swedish-mode .viking-ship {
      display: block;
    }

    @keyframes sail {
      0% { left: -100px; }
      100% { left: calc(100% + 100px); }
    }

    /* Fika reminder popup */
    .fika-reminder {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 3000;
      animation: fadeIn 0.3s ease;
    }

    .fika-content {
      background: linear-gradient(135deg, #006AA7, #004d7a);
      color: white;
      padding: 2rem;
      border-radius: 16px;
      text-align: center;
      animation: bounceIn 0.5s ease;
    }

    .fika-emoji {
      font-size: 3rem;
      display: block;
      margin-bottom: 1rem;
    }

    .fika-content p {
      margin: 0.5rem 0;
      font-size: 1.2rem;
    }

    .fika-content button {
      margin-top: 1rem;
      background: #FECC00;
      color: #006AA7;
      font-weight: 600;
    }

    @keyframes bounceIn {
      0% { transform: scale(0.3); opacity: 0; }
      50% { transform: scale(1.05); }
      70% { transform: scale(0.9); }
      100% { transform: scale(1); opacity: 1; }
    }

    /* Midsommar mode (June) */
    body.swedish-mode.midsommar::before {
      content: 'ðŸŒ¸ðŸŒ¼ðŸŒ·ðŸŒ»ðŸŒº';
      position: fixed;
      top: 10px;
      left: 50%;
      transform: translateX(-50%);
      font-size: 1.5rem;
      letter-spacing: 0.5rem;
      animation: float 3s ease-in-out infinite;
      z-index: 1;
    }

    @keyframes float {
      0%, 100% { transform: translateX(-50%) translateY(0); }
      50% { transform: translateX(-50%) translateY(-10px); }
    }

    /* User counter */
    .user-counter {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--surface-2);
      border-radius: 20px;
      font-size: 0.85rem;
      color: var(--text-muted);
      margin-bottom: 1.5rem;
    }

    .user-counter .count {
      color: var(--accent);
      font-weight: 700;
    }

    /* Swedish mode user counter */
    body.swedish-mode .user-counter {
      background: linear-gradient(135deg, var(--swedish-blue), #004d7a);
      color: #fff;
    }

    body.swedish-mode .user-counter .count {
      color: var(--swedish-yellow);
    }

    /* Swedish mode Hall of Fame */
    body.swedish-mode .hall-of-fame h3 {
      color: var(--swedish-yellow);
    }

    body.swedish-mode .hof-entry {
      background: linear-gradient(135deg, var(--swedish-blue), #004d7a);
      color: #fff;
    }

    /* Status Widgets Container (below header, right side) */
    .status-widgets {
      position: fixed;
      top: 4.5rem; /* Below the sticky header */
      right: 1rem;
      display: flex;
      flex-direction: row;
      gap: 0.5rem;
      z-index: 999; /* Below header z-index */
      align-items: center;
    }

    /* Deployment Monitor Widget */
    .deploy-widget {
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.5rem 0.75rem;
      font-size: 0.7rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 0.5rem;
      opacity: 0.8;
      transition: opacity 0.2s, transform 0.2s;
      cursor: pointer;
    }

    .deploy-widget:hover {
      opacity: 1;
      transform: translateY(-2px);
    }

    .deploy-widget.deploying {
      border-color: var(--accent);
      animation: pulse 2s ease-in-out infinite;
    }

    .deploy-widget.success {
      border-color: var(--success);
    }

    .deploy-widget.failure {
      border-color: var(--danger);
    }

    @keyframes pulse {
      0%, 100% { box-shadow: 0 0 0 0 rgba(29, 185, 84, 0.4); }
      50% { box-shadow: 0 0 0 4px rgba(29, 185, 84, 0); }
    }

    .deploy-widget .avatar {
      width: 20px;
      height: 20px;
      border-radius: 50%;
    }

    .deploy-widget .spinner-small {
      width: 14px;
      height: 14px;
      border: 2px solid var(--surface-2);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    .deploy-widget .step {
      max-width: 120px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .deploy-refresh-prompt {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: var(--surface);
      border: 1px solid var(--accent);
      border-radius: 12px;
      padding: 1.5rem;
      text-align: center;
      z-index: 2000;
      box-shadow: 0 10px 40px rgba(0,0,0,0.5);
    }

    .deploy-refresh-prompt h3 {
      margin-bottom: 0.5rem;
      color: var(--accent);
    }

    .deploy-refresh-prompt p {
      margin-bottom: 1rem;
      color: var(--text-muted);
    }

    .deploy-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.7);
      z-index: 1999;
    }

    /* KV Status Indicator */
    .kv-status-indicator {
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.5rem 0.75rem;
      font-size: 0.7rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 0.35rem;
      opacity: 0.8;
      transition: opacity 0.2s, transform 0.2s;
      cursor: pointer;
    }

    .kv-status-indicator:hover {
      opacity: 1;
      transform: translateY(-2px);
    }

    .kv-status-indicator.kv-ok {
      border-color: var(--success);
    }

    .kv-status-indicator.kv-warning {
      border-color: #f0ad4e;
    }

    .kv-status-indicator.kv-critical {
      border-color: var(--danger);
      animation: pulse 2s ease-in-out infinite;
    }

    body.light-mode .kv-status-indicator {
      border: 1px solid var(--border);
      background: var(--surface);
    }

    /* === Now Playing Widget === */
    .now-playing-widget {
      display: none; /* Hidden by default - JS sets display:flex when playing */
      position: fixed;
      bottom: 4rem;
      left: 50%;
      transform: translateX(-50%);
      background: linear-gradient(135deg, rgba(30, 30, 30, 0.95), rgba(18, 18, 18, 0.98));
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 0.75rem;
      align-items: center;
      gap: 0.75rem;
      z-index: 1000;
      min-width: 280px;
      max-width: 400px;
      box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(10px);
      animation: slideUpFadeIn 0.3s ease;
    }

    @keyframes slideUpFadeIn {
      from {
        opacity: 0;
        transform: translateX(-50%) translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
      }
    }

    .now-playing-art {
      position: relative;
      width: 56px;
      height: 56px;
      flex-shrink: 0;
    }

    .now-playing-art img {
      width: 100%;
      height: 100%;
      border-radius: 6px;
      object-fit: cover;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }

    .now-playing-equalizer {
      position: absolute;
      bottom: 4px;
      right: 4px;
      display: flex;
      align-items: flex-end;
      gap: 2px;
      padding: 3px;
      background: rgba(0, 0, 0, 0.6);
      border-radius: 4px;
    }

    .now-playing-equalizer span {
      width: 3px;
      background: var(--accent);
      border-radius: 1px;
      animation: equalizerBounce 0.5s ease-in-out infinite alternate;
    }

    .now-playing-equalizer span:nth-child(1) {
      height: 8px;
      animation-delay: 0s;
    }

    .now-playing-equalizer span:nth-child(2) {
      height: 12px;
      animation-delay: 0.2s;
    }

    .now-playing-equalizer span:nth-child(3) {
      height: 6px;
      animation-delay: 0.4s;
    }

    @keyframes equalizerBounce {
      from { transform: scaleY(0.4); }
      to { transform: scaleY(1); }
    }

    .now-playing-widget:not(.is-playing) .now-playing-equalizer {
      display: none;
    }

    .now-playing-info {
      flex: 1;
      min-width: 0;
      overflow: hidden;
    }

    .now-playing-track {
      font-size: 0.9rem;
      font-weight: 600;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 2px;
    }

    .now-playing-artist {
      font-size: 0.75rem;
      color: var(--text-muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-bottom: 6px;
    }

    .now-playing-progress {
      width: 100%;
    }

    .now-playing-progress-bar {
      height: 3px;
      background: var(--border);
      border-radius: 2px;
      overflow: hidden;
    }

    .now-playing-progress-fill {
      height: 100%;
      background: var(--accent);
      border-radius: 2px;
      transition: width 1s linear;
    }

    body.light-mode .now-playing-widget {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(245, 245, 245, 0.98));
      border: 1px solid var(--border);
    }

    @media (max-width: 600px) {
      .now-playing-widget {
        bottom: 4rem;
        left: 1rem;
        right: 1rem;
        transform: none;
        min-width: unset;
        max-width: unset;
      }

      @keyframes slideUpFadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    }

    /* KV Status Modal Content */
    .kv-status-panel {
      max-width: 550px;
      max-height: 85vh;
      display: flex;
      flex-direction: column;
    }

    .kv-status-content {
      padding: 1rem;
      overflow-y: auto;
      flex: 1;
      min-height: 0;
    }

    .kv-status-summary {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .kv-status-badge {
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 600;
      font-size: 0.9rem;
    }

    .kv-status-badge.ok {
      background: rgba(29, 185, 84, 0.2);
      color: var(--success);
    }

    .kv-status-badge.warning {
      background: rgba(240, 173, 78, 0.2);
      color: #f0ad4e;
    }

    .kv-status-badge.critical {
      background: rgba(231, 76, 60, 0.2);
      color: var(--danger);
    }

    .kv-status-date {
      color: var(--text-muted);
      font-size: 0.8rem;
    }

    .kv-usage-bars {
      margin-bottom: 1.5rem;
    }

    .kv-bar-section {
      margin-bottom: 1rem;
    }

    .kv-bar-label {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      margin-bottom: 0.25rem;
      color: var(--text-muted);
    }

    .kv-bar-container {
      height: 8px;
      background: var(--surface-2);
      border-radius: 4px;
      overflow: hidden;
    }

    .kv-bar {
      height: 100%;
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .kv-bar-reads {
      background: linear-gradient(90deg, #3498db, #2980b9);
    }

    .kv-bar-writes {
      background: linear-gradient(90deg, #e67e22, #d35400);
    }

    .kv-bar-percent {
      font-size: 0.7rem;
      color: var(--text-muted);
      margin-top: 0.15rem;
      text-align: right;
    }

    .kv-breakdown h4,
    .kv-realtime h4,
    .kv-trend h4,
    .kv-recommendations h4,
    .kv-activity h4 {
      font-size: 0.85rem;
      color: var(--text);
      margin-bottom: 0.75rem;
      padding-bottom: 0.5rem;
      border-bottom: 1px solid var(--border);
    }

    .kv-breakdown-table {
      width: 100%;
      font-size: 0.75rem;
      border-collapse: collapse;
      margin-bottom: 1.5rem;
    }

    .kv-breakdown-table th,
    .kv-breakdown-table td {
      padding: 0.5rem;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    .kv-breakdown-table th {
      color: var(--text-muted);
      font-weight: 500;
    }

    .kv-breakdown-table td {
      color: var(--text);
    }

    .kv-realtime {
      margin-bottom: 1.5rem;
    }

    .kv-realtime-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 0.75rem;
    }

    .kv-stat {
      text-align: center;
      background: var(--surface-2);
      padding: 0.75rem;
      border-radius: 8px;
    }

    .kv-stat-value {
      display: block;
      font-size: 1.2rem;
      font-weight: 700;
      color: var(--accent);
    }

    .kv-stat-label {
      font-size: 0.65rem;
      color: var(--text-muted);
    }

    .kv-trend {
      margin-bottom: 1.5rem;
    }

    .kv-trend p {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.25rem;
    }

    .kv-recommendations {
      margin-bottom: 1.5rem;
      background: rgba(240, 173, 78, 0.1);
      padding: 0.75rem;
      border-radius: 8px;
      border: 1px solid rgba(240, 173, 78, 0.3);
    }

    .kv-recommendations ul {
      margin: 0;
      padding-left: 1.25rem;
      font-size: 0.8rem;
    }

    .kv-recommendations li {
      color: var(--text);
      margin-bottom: 0.25rem;
    }

    .kv-activity-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    .kv-activity-item {
      text-align: center;
    }

    .kv-activity-num {
      display: block;
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--text);
    }

    .kv-activity-label {
      font-size: 0.7rem;
      color: var(--text-muted);
    }

    @media (max-width: 600px) {
      .kv-status-indicator {
        right: 140px;
        padding: 0.35rem 0.5rem;
        font-size: 0.6rem;
      }

      .kv-realtime-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .kv-activity-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 0.5rem;
      }
    }

    /* Hall of Fame */
    .hall-of-fame {
      margin-top: 2rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border);
    }

    .hall-of-fame h3 {
      font-size: 0.9rem;
      margin-bottom: 1rem;
      color: var(--text-muted);
    }

    .hof-list {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .hof-entry {
      display: flex;
      align-items: center;
      gap: 0.25rem;
      padding: 0.25rem 0.5rem;
      background: var(--surface-2);
      border-radius: 4px;
      font-size: 0.7rem;
    }

    .hof-entry .position {
      color: var(--swedish-yellow);
      font-weight: 700;
    }

    /* Donation button - in sidebar */
    .sidebar-donate-btn {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      background: linear-gradient(135deg, #8B4513, #D2691E);
      border: none;
      border-radius: 8px;
      font-size: 0.85rem;
      color: #fff;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      margin-top: auto;
    }

    .sidebar-donate-btn:hover {
      transform: scale(1.02);
      box-shadow: 0 0 15px rgba(210, 105, 30, 0.4);
    }

    .sidebar-donate-btn .icon {
      position: relative;
      animation: iconGlow 2s ease-in-out infinite;
    }

    @keyframes iconGlow {
      0%, 100% { opacity: 0.8; }
      50% { opacity: 1; }
    }

    /* Smoke wisps on hover */
    .sidebar-donate-btn::before,
    .sidebar-donate-btn::after {
      content: '~';
      position: absolute;
      top: 0;
      left: 1.5rem;
      font-size: 0.9rem;
      color: rgba(200, 200, 200, 0);
      pointer-events: none;
      transition: opacity 0.3s;
    }

    .sidebar-donate-btn::after {
      left: 2rem;
      animation-delay: 0.3s;
    }

    /* Donation button theme variants */
    .donate-coffee {
      background: linear-gradient(135deg, #4a2c2a, #6f4e37);
    }
    .donate-coffee:hover {
      box-shadow: 0 0 15px rgba(111, 78, 55, 0.5);
    }

    .donate-genie {
      background: linear-gradient(135deg, #5b3d8c, #8b5cf6);
    }
    .donate-genie:hover {
      box-shadow: 0 0 15px rgba(139, 92, 246, 0.5);
    }

    .donate-spotify {
      background: linear-gradient(135deg, #1a5c3e, #1DB954);
    }
    .donate-spotify:hover {
      box-shadow: 0 0 15px rgba(29, 185, 84, 0.5);
    }

    .donate-beer {
      background: linear-gradient(135deg, #c68c0c, #f0a500);
    }
    .donate-beer:hover {
      box-shadow: 0 0 15px rgba(240, 165, 0, 0.5);
    }

    .donate-pie {
      background: linear-gradient(135deg, #8B4513, #D2691E);
    }
    .donate-pie:hover {
      box-shadow: 0 0 15px rgba(210, 105, 30, 0.5);
    }

    .donate-money {
      background: linear-gradient(135deg, #1a472a, #228B22);
    }
    .donate-money:hover {
      box-shadow: 0 0 15px rgba(34, 139, 34, 0.5);
    }

    .donate-snus {
      background: linear-gradient(135deg, #006AA7, #FECC00);
    }
    .donate-snus:hover {
      box-shadow: 0 0 15px rgba(254, 204, 0, 0.5);
    }

    .sidebar-donate-btn:hover::before,
    .sidebar-donate-btn:hover::after {
      animation: smokeWisp 2s ease-out infinite;
    }

    .sidebar-donate-btn:hover::after {
      animation-delay: 0.5s;
    }

    @keyframes smokeWisp {
      0% {
        opacity: 0;
        transform: translateY(0) translateX(0) rotate(0deg);
      }
      20% {
        opacity: 0.6;
      }
      100% {
        opacity: 0;
        transform: translateY(-25px) translateX(8px) rotate(15deg);
      }
    }

    /* Reduced motion: disable smoke animation */
    @media (prefers-reduced-motion: reduce) {
      .sidebar-donate-btn::before,
      .sidebar-donate-btn::after {
        animation: none;
      }
      .sidebar-donate-btn .icon {
        animation: none;
      }
    }

    /* Swedish mode snus styling */
    body.swedish-mode .sidebar-donate-btn {
      background: linear-gradient(135deg, var(--swedish-blue), #004d7a);
    }

    body.swedish-mode .sidebar-donate-btn:hover {
      box-shadow: 0 0 15px rgba(0, 106, 167, 0.4);
    }

    /* Bryan tribute text */
    .bryan-text {
      font-size: 0.5rem;
      opacity: 0.7;
      font-style: italic;
      vertical-align: super;
      margin-left: 0.2rem;
    }

    /* Floating Genie Mascot */
    .genie-mascot {
      position: fixed;
      bottom: 6rem;
      right: 1.5rem;
      font-size: 2.5rem;
      cursor: pointer;
      z-index: 90;
      animation: genieFloat 4s ease-in-out infinite, genieWander 20s ease-in-out infinite;
      filter: drop-shadow(0 4px 8px rgba(0, 0, 0, 0.3));
      transition: transform 0.3s ease;
    }

    .genie-mascot:hover {
      animation-play-state: paused;
      transform: scale(1.2);
    }

    @keyframes genieFloat {
      0%, 100% { transform: translateY(0) rotate(-5deg); }
      50% { transform: translateY(-15px) rotate(5deg); }
    }

    @keyframes genieWander {
      0%, 100% { right: 1.5rem; bottom: 6rem; }
      25% { right: 3rem; bottom: 8rem; }
      50% { right: 2rem; bottom: 5rem; }
      75% { right: 4rem; bottom: 7rem; }
    }

    body.swedish-mode .genie-mascot {
      display: none;
    }

    /* Swedish Viking replaces Genie */
    body.swedish-mode .viking-ship {
      display: block;
    }

    /* Footer badges */
    .footer-badges {
      display: flex;
      gap: 0.5rem;
      margin-top: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .footer-badges a {
      opacity: 0.7;
      transition: opacity 0.2s;
    }

    .footer-badges a:hover {
      opacity: 1;
    }

    /* GitHub Star Badge - prominent with hover animation */
    .github-star-badge {
      position: relative;
      display: inline-block;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }

    .github-star-badge img {
      transform: scale(1.05);
      transition: transform 0.2s ease, filter 0.2s ease;
    }

    .github-star-badge:hover {
      opacity: 1 !important;
      transform: scale(1.1);
    }

    .github-star-badge:hover img {
      filter: drop-shadow(0 0 8px rgba(29, 185, 84, 0.6));
      animation: starPulse 1.5s ease-in-out infinite;
    }

    @keyframes starPulse {
      0%, 100% {
        filter: drop-shadow(0 0 8px rgba(29, 185, 84, 0.6));
      }
      50% {
        filter: drop-shadow(0 0 16px rgba(29, 185, 84, 0.9));
      }
    }

    /* Stats Dashboard */
    .stats-dashboard {
      margin-bottom: 1.5rem;
      padding: 1rem;
      background: var(--surface);
      border-radius: 8px;
      border: 1px solid var(--border);
    }

    .stats-toggle {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
    }

    .stats-toggle h3 {
      margin: 0;
      font-size: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .stats-content {
      margin-top: 1rem;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .stats-section {
      background: var(--surface-2);
      padding: 0.75rem;
      border-radius: 6px;
    }

    .stats-section h4 {
      font-size: 0.85rem;
      color: var(--text-muted);
      margin: 0 0 0.5rem 0;
    }

    .top-genres-list {
      display: flex;
      flex-direction: column;
      gap: 0.375rem;
    }

    .genre-bar {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .genre-bar-name {
      font-size: 0.75rem;
      width: 100px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .genre-bar-track {
      flex: 1;
      height: 16px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
    }

    .genre-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-hover));
      border-radius: 3px;
      transition: width 0.5s ease, transform 0.2s ease;
    }

    .genre-bar-row:hover .genre-bar-fill {
      transform: scaleY(1.2);
    }

    /* Genre bar color variants for variety */
    .genre-bar-fill.bar-1 { background: linear-gradient(90deg, #1ed760, #1db954); }
    .genre-bar-fill.bar-2 { background: linear-gradient(90deg, #1db954, #18a34a); }
    .genre-bar-fill.bar-3 { background: linear-gradient(90deg, #18a34a, #16993d); }
    .genre-bar-fill.bar-4 { background: linear-gradient(90deg, #16993d, #148f35); }
    .genre-bar-fill.bar-5 { background: linear-gradient(90deg, #148f35, #12852e); }
    .genre-bar-fill.bar-6 { background: linear-gradient(90deg, #12852e, #107b27); }
    .genre-bar-fill.bar-7 { background: linear-gradient(90deg, #107b27, #0e7120); }
    .genre-bar-fill.bar-8 { background: linear-gradient(90deg, #0e7120, #0c671a); }
    .genre-bar-fill.bar-9 { background: linear-gradient(90deg, #0c671a, #0a5d14); }
    .genre-bar-fill.bar-10 { background: linear-gradient(90deg, #0a5d14, #08530e); }

    .genre-bar-count {
      font-size: 0.7rem;
      color: var(--text-muted);
      width: 35px;
      text-align: right;
    }

    .diversity-meter {
      height: 8px;
      background: var(--border);
      border-radius: 4px;
      overflow: hidden;
      margin: 0.5rem 0;
    }

    .diversity-fill {
      height: 100%;
      background: linear-gradient(90deg, #e74c3c, #f39c12, #2ecc71);
      border-radius: 4px;
    }

    .diversity-label {
      font-size: 0.85rem;
      text-align: center;
    }

    .diversity-score {
      font-size: 1.5rem;
      font-weight: bold;
      text-align: center;
      color: var(--accent);
    }

    .avg-stat {
      text-align: center;
    }

    .avg-stat .big-number {
      font-size: 2rem;
      font-weight: bold;
      color: var(--accent);
    }

    .avg-stat .label {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    /* Toolbar Row */
    .toolbar-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 1rem;
      justify-content: center;
    }

    /* Stats Dashboard - genre bars */
    .genre-bars {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .genre-bar-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .genre-bar-row .genre-bar-name {
      font-size: 0.75rem;
      width: 100px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    .genre-bar-container {
      flex: 1;
      height: 16px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
    }

    .genre-bar-container .genre-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), var(--accent-hover));
      border-radius: 3px;
      transition: width 0.5s ease, transform 0.2s ease;
    }

    .genre-bar-row:hover .genre-bar-container .genre-bar {
      transform: scaleY(1.15);
    }

    /* Stats dashboard genre bar color variants */
    .genre-bar-container .genre-bar.bar-1 { background: linear-gradient(90deg, #1ed760, #1db954); }
    .genre-bar-container .genre-bar.bar-2 { background: linear-gradient(90deg, #1db954, #18a34a); }
    .genre-bar-container .genre-bar.bar-3 { background: linear-gradient(90deg, #18a34a, #16993d); }
    .genre-bar-container .genre-bar.bar-4 { background: linear-gradient(90deg, #16993d, #148f35); }
    .genre-bar-container .genre-bar.bar-5 { background: linear-gradient(90deg, #148f35, #12852e); }
    .genre-bar-container .genre-bar.bar-6 { background: linear-gradient(90deg, #12852e, #107b27); }
    .genre-bar-container .genre-bar.bar-7 { background: linear-gradient(90deg, #107b27, #0e7120); }
    .genre-bar-container .genre-bar.bar-8 { background: linear-gradient(90deg, #0e7120, #0c671a); }
    .genre-bar-container .genre-bar.bar-9 { background: linear-gradient(90deg, #0c671a, #0a5d14); }
    .genre-bar-container .genre-bar.bar-10 { background: linear-gradient(90deg, #0a5d14, #08530e); }

    .genre-bar-row .genre-bar-count {
      font-size: 0.7rem;
      color: var(--text-muted);
      width: 35px;
      text-align: right;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
    }

    .stat-box {
      background: var(--surface-2);
      padding: 1.25rem;
      border-radius: 10px;
      text-align: center;
      border: 1px solid var(--border);
      transition: all 0.25s ease;
      position: relative;
      overflow: hidden;
    }

    .stat-box::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), var(--accent-hover));
      opacity: 0;
      transition: opacity 0.25s ease;
    }

    .stat-box:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
      border-color: var(--accent);
    }

    .stat-box:hover::before {
      opacity: 1;
    }

    .stat-box-value {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--accent);
      line-height: 1.2;
    }

    .stat-box-label {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }

    .diversity-info {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-top: 0.5rem;
    }

    .diversity-info .diversity-score {
      font-size: 1.25rem;
    }

    .diversity-info .diversity-label {
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    /* Wrapped-style Diversity Card */
    .wrapped-diversity-card {
      margin-top: 1.5rem;
      padding: 1.5rem;
      border-radius: 16px;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
      position: relative;
      overflow: hidden;
      animation: cardGlow 3s ease-in-out infinite alternate;
    }

    @keyframes cardGlow {
      0% { box-shadow: 0 0 20px rgba(30, 215, 96, 0.2); }
      100% { box-shadow: 0 0 30px rgba(30, 215, 96, 0.4); }
    }

    .wrapped-diversity-card::before {
      content: '';
      position: absolute;
      top: -50%;
      left: -50%;
      width: 200%;
      height: 200%;
      background: conic-gradient(from 0deg, transparent, rgba(30, 215, 96, 0.1), transparent 30%);
      animation: cardRotate 10s linear infinite;
    }

    @keyframes cardRotate {
      100% { transform: rotate(360deg); }
    }

    .wrapped-diversity-card .wrapped-content {
      position: relative;
      z-index: 1;
    }

    .wrapped-score-display {
      text-align: center;
      margin-bottom: 1rem;
    }

    .wrapped-score-big {
      font-size: 4rem;
      font-weight: 900;
      background: linear-gradient(135deg, #1ed760, #1db954, #1ed760);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      animation: scoreGradient 3s ease infinite;
      line-height: 1;
    }

    @keyframes scoreGradient {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }

    .wrapped-score-label {
      font-size: 1.1rem;
      font-weight: 600;
      color: rgba(255, 255, 255, 0.9);
      text-transform: uppercase;
      letter-spacing: 2px;
      margin-top: 0.25rem;
    }

    .wrapped-divider {
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--spotify-green), transparent);
      margin: 1rem 0;
      opacity: 0.5;
    }

    .diversity-quote {
      text-align: center;
      padding: 0.5rem;
    }

    .diversity-quote .quote-text {
      font-size: 1.1rem;
      line-height: 1.5;
      color: rgba(255, 255, 255, 0.95);
      font-weight: 500;
    }

    .wrapped-personality {
      margin-top: 1rem;
      padding: 0.75rem 1rem;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      text-align: center;
    }

    .wrapped-personality-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      color: rgba(255, 255, 255, 0.5);
      margin-bottom: 0.25rem;
    }

    .wrapped-personality-type {
      font-size: 1.25rem;
      font-weight: 700;
      color: var(--spotify-green);
    }

    /* Swedish mode Wrapped card */
    .swedish-mode .wrapped-diversity-card {
      background: linear-gradient(135deg, #002f6c 0%, #003d8f 50%, #1a5aa8 100%);
    }

    .swedish-mode .wrapped-diversity-card::before {
      background: conic-gradient(from 0deg, transparent, rgba(254, 204, 0, 0.15), transparent 30%);
    }

    .swedish-mode .wrapped-score-big {
      background: linear-gradient(135deg, #FECC00, #ffd633, #FECC00);
      background-size: 200% 200%;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .swedish-mode .wrapped-divider {
      background: linear-gradient(90deg, transparent, #FECC00, transparent);
    }

    .swedish-mode .wrapped-personality-type {
      color: #FECC00;
    }

    @keyframes cardGlow {
      0% { box-shadow: 0 0 20px rgba(254, 204, 0, 0.2); }
      100% { box-shadow: 0 0 30px rgba(254, 204, 0, 0.4); }
    }

    /* Light mode adjustments */
    body:not(.dark-mode) .wrapped-diversity-card {
      background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 50%, #a5d6a7 100%);
    }

    body:not(.dark-mode) .wrapped-diversity-card::before {
      background: conic-gradient(from 0deg, transparent, rgba(30, 215, 96, 0.2), transparent 30%);
    }

    body:not(.dark-mode) .wrapped-score-label,
    body:not(.dark-mode) .diversity-quote .quote-text {
      color: #1a1a1a;
    }

    body:not(.dark-mode) .wrapped-personality {
      background: rgba(0, 0, 0, 0.05);
    }

    body:not(.dark-mode) .wrapped-personality-label {
      color: rgba(0, 0, 0, 0.5);
    }

    body:not(.dark-mode).swedish-mode .wrapped-diversity-card {
      background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 50%, #90caf9 100%);
    }

    /* Mobile Responsive Styles */
    @media (max-width: 768px) {
      header {
        position: sticky;
        top: 0;
        z-index: 100;
        padding: 0.75rem 1rem;
        backdrop-filter: blur(10px);
        background: rgba(var(--bg), 0.95);
      }

      header h1 {
        font-size: 1.25rem;
      }

      .user-info {
        gap: 0.5rem;
      }

      .user-info span {
        display: none;
      }

      .user-info .avatar {
        width: 32px;
        height: 32px;
      }

      main {
        padding: 0.75rem;
      }

      .stats {
        flex-direction: column;
        gap: 0.75rem;
        margin-bottom: 1rem;
      }

      .stat {
        padding: 0.75rem;
      }

      .stat-label {
        font-size: 0.7rem;
      }

      .stat-value {
        font-size: 1.25rem;
      }

      .card {
        padding: 1rem;
      }

      .card-title {
        font-size: 1.25rem;
      }

      .genre-list {
        max-height: 60vh;
        gap: 0.375rem;
      }

      .genre-item {
        padding: 0.875rem 0.75rem;
        min-height: 48px;
        flex-wrap: wrap;
      }

      .genre-checkbox {
        width: 22px;
        height: 22px;
      }

      .genre-name {
        font-size: 0.85rem;
        flex: 1 1 auto;
        min-width: 0;
        overflow: hidden;
        text-overflow: ellipsis;
        white-space: nowrap;
      }

      .genre-count {
        font-size: 0.7rem;
        padding: 0.2rem 0.4rem;
      }

      .genre-hide,
      .genre-create {
        opacity: 1;
        min-width: 44px;
        min-height: 44px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .btn {
        min-height: 44px;
        min-width: 44px;
        padding: 0.75rem 1rem;
        font-size: 0.9rem;
      }

      .btn-sm {
        min-height: 40px;
        padding: 0.5rem 0.75rem;
      }

      .actions {
        position: sticky;
        bottom: 0;
        left: 0;
        right: 0;
        background: var(--surface);
        padding: 1rem;
        margin: 1rem -1rem -1rem;
        border-radius: 0;
        border-top: 1px solid var(--border);
        flex-wrap: wrap;
        z-index: 50;
      }

      .actions .btn {
        flex: 1;
        min-width: 100px;
      }

      .template-settings {
        padding: 0.75rem;
      }

      .template-input-row {
        flex-direction: column;
        gap: 0.5rem;
      }

      .template-input-row input {
        width: 100%;
      }

      .hidden-toolbar {
        flex-direction: column;
        align-items: stretch;
        gap: 0.5rem;
      }

      .hidden-toolbar label {
        justify-content: center;
      }

      .hidden-toolbar button {
        width: 100%;
      }

      .hidden-count {
        margin-left: 0;
        text-align: center;
      }

      .search-input {
        font-size: 16px;
        min-height: 44px;
      }

      .welcome {
        padding: 1.5rem 1rem;
      }

      .welcome h2 {
        font-size: 1.5rem;
      }

      .welcome p {
        font-size: 0.9rem;
      }

      .cache-status {
        flex-direction: column;
        gap: 0.5rem;
        align-items: stretch;
      }

      .deploy-widget {
        top: auto;
        bottom: 60px;
        right: 10px;
        font-size: 0.7rem;
        padding: 0.4rem 0.6rem;
      }

      .heidi-badge {
        bottom: 10px;
        right: 10px;
        font-size: 0.65rem;
        padding: 0.35rem 0.6rem;
      }

      .result-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.5rem;
      }

      .stats-content {
        grid-template-columns: 1fr;
      }

      .genre-bar-name {
        width: 80px;
        font-size: 0.7rem;
      }
    }

    @media (max-width: 400px) {
      header h1 {
        font-size: 1rem;
      }

      .btn {
        padding: 0.625rem 0.75rem;
        font-size: 0.85rem;
      }

      .genre-item {
        padding: 0.75rem 0.5rem;
      }

      .stat-value {
        font-size: 1.1rem;
      }
    }

    /* Changelog Timeline */
    .changelog-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.6);
      backdrop-filter: blur(4px);
      z-index: 1000;
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .changelog-overlay.visible {
      opacity: 1;
    }

    .changelog-panel {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%) scale(0.9);
      background: var(--card-bg);
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      max-width: 500px;
      width: 90%;
      max-height: 80vh;
      display: flex;
      flex-direction: column;
      z-index: 1001;
      opacity: 0;
      transition: all 0.3s ease;
    }

    .changelog-panel.visible {
      opacity: 1;
      transform: translate(-50%, -50%) scale(1);
    }

    .changelog-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.25rem;
      border-bottom: 1px solid var(--border);
    }

    .changelog-header h3 {
      margin: 0;
      font-size: 1.1rem;
      color: var(--text);
    }

    .changelog-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      color: var(--text-muted);
      cursor: pointer;
      padding: 0;
      line-height: 1;
    }

    .changelog-close:hover {
      color: var(--text);
    }

    .changelog-timeline {
      overflow-y: auto;
      padding: 1rem 1.25rem;
      flex: 1;
    }

    .changelog-item {
      display: flex;
      gap: 1rem;
      position: relative;
      padding-bottom: 1.25rem;
    }

    .changelog-item:last-child {
      padding-bottom: 0;
    }

    .changelog-item:not(:last-child)::before {
      content: '';
      position: absolute;
      left: 7px;
      top: 18px;
      bottom: 0;
      width: 2px;
      background: var(--border);
    }

    .changelog-dot {
      width: 16px;
      height: 16px;
      border-radius: 50%;
      background: var(--border);
      flex-shrink: 0;
      margin-top: 3px;
    }

    .changelog-item.current .changelog-dot {
      background: var(--spotify-green);
      box-shadow: 0 0 8px var(--spotify-green);
    }

    .changelog-content {
      flex: 1;
    }

    .changelog-version {
      font-weight: 600;
      color: var(--text);
      font-size: 0.95rem;
    }

    .changelog-item.current .changelog-version {
      color: var(--spotify-green);
    }

    .changelog-date {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .changelog-changes {
      margin: 0;
      padding-left: 1.2rem;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .changelog-changes li {
      margin-bottom: 0.25rem;
    }

    .changelog-footer {
      padding: 0.75rem 1.25rem;
      border-top: 1px solid var(--border);
      text-align: center;
    }

    .changelog-footer a {
      color: var(--spotify-green);
      text-decoration: none;
      font-size: 0.9rem;
    }

    .changelog-footer a:hover {
      text-decoration: underline;
    }

    /* Progressive Loading */
    .progressive-loading {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
      padding: 2rem;
    }

    .progress-header {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .progress-message {
      color: var(--text);
      font-size: 1.1rem;
    }

    .progress-container {
      width: 100%;
      max-width: 400px;
    }

    .progress-bar {
      height: 8px;
      background: var(--border);
      border-radius: 4px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--spotify-green), #1ed760);
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .progress-text {
      text-align: center;
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }

    .partial-genres-container {
      width: 100%;
      max-width: 600px;
    }

    .partial-genres-preview {
      background: var(--card-bg);
      border-radius: 8px;
      padding: 1rem;
      animation: fadeIn 0.3s ease;
    }

    .preview-label {
      display: block;
      color: var(--text-muted);
      font-size: 0.85rem;
      margin-bottom: 0.75rem;
    }

    .preview-tags {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .preview-tag {
      background: var(--bg);
      color: var(--text);
      padding: 0.35rem 0.7rem;
      border-radius: 20px;
      font-size: 0.8rem;
      animation: slideIn 0.3s ease;
    }

    .preview-more {
      color: var(--text-muted);
      font-size: 0.8rem;
      padding: 0.35rem 0.5rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    /* Theme Toggle in Header */
    #header-actions {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .theme-toggle-btn {
      font-size: 1.2rem;
      padding: 0.5rem;
      border-radius: 8px;
      transition: transform 0.2s ease, background 0.2s ease;
      flex-shrink: 0;
    }

    .theme-toggle-btn:hover {
      transform: scale(1.1);
      background: var(--border);
    }

    /* Enhanced Loading UX - Full Page Interactive */
    .progressive-loading-full {
      max-width: 900px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    /* Album Art Carousel */
    .album-art-carousel {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 1rem;
      margin-bottom: 2rem;
      height: 120px;
      perspective: 1000px;
    }

    .album-art-item {
      width: 100px;
      height: 100px;
      border-radius: 8px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.3);
      transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      opacity: 0;
      transform: scale(0.8) rotateY(-15deg);
    }

    .album-art-item.visible {
      opacity: 1;
      transform: scale(1) rotateY(0deg);
    }

    .album-art-item.center {
      width: 120px;
      height: 120px;
      box-shadow: 0 8px 25px rgba(29, 185, 84, 0.4);
      z-index: 2;
    }

    .album-art-item.left {
      transform: scale(0.85) rotateY(15deg) translateX(-10px);
    }

    .album-art-item.right {
      transform: scale(0.85) rotateY(-15deg) translateX(10px);
    }

    .album-art-item img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .album-art-item.placeholder {
      background: var(--surface-2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2rem;
    }

    /* Animated counter effect */
    .loading-stat-value.counting {
      animation: countPulse 0.3s ease;
    }

    @keyframes countPulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); color: #1ed760; }
      100% { transform: scale(1); }
    }

    /* Live bar chart */
    .live-bar-chart {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--border);
    }

    .live-bar-chart h4 {
      margin-bottom: 1rem;
      font-size: 0.95rem;
      color: var(--text-muted);
    }

    .bar-chart-item {
      display: flex;
      align-items: center;
      margin-bottom: 0.5rem;
      gap: 0.5rem;
    }

    .bar-chart-label {
      width: 120px;
      font-size: 0.8rem;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .bar-chart-bar-container {
      flex: 1;
      height: 20px;
      background: var(--surface-2);
      border-radius: 4px;
      overflow: hidden;
    }

    .bar-chart-bar {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), #1ed760);
      border-radius: 4px;
      transition: width 0.5s cubic-bezier(0.4, 0, 0.2, 1);
      min-width: 2px;
    }

    .bar-chart-count {
      width: 40px;
      font-size: 0.8rem;
      color: var(--text-muted);
      text-align: right;
    }

    .loading-header {
      text-align: center;
      margin-bottom: 2rem;
    }

    .loading-header h2 {
      font-size: 1.8rem;
      margin-bottom: 0.5rem;
      color: var(--text);
    }

    .loading-subtitle {
      color: var(--text-muted);
      font-size: 1rem;
    }

    .loading-stats-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 1rem;
      margin-bottom: 2rem;
    }

    .loading-stat {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 1.25rem;
      text-align: center;
      transition: transform 0.2s ease, border-color 0.2s ease;
    }

    .loading-stat:hover {
      transform: translateY(-2px);
      border-color: var(--accent);
    }

    .loading-stat-value {
      font-size: 2rem;
      font-weight: 700;
      color: var(--accent);
      transition: all 0.3s ease;
    }

    .loading-stat-label {
      font-size: 0.8rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-top: 0.25rem;
    }

    .progress-container-full {
      margin-bottom: 2rem;
    }

    .progress-bar-full {
      height: 12px;
      background: var(--surface);
      border-radius: 6px;
      overflow: hidden;
      border: 1px solid var(--border);
    }

    .progress-fill-full {
      height: 100%;
      background: linear-gradient(90deg, var(--accent), #1ed760);
      border-radius: 6px;
      transition: width 0.5s ease;
      box-shadow: 0 0 10px rgba(29, 185, 84, 0.4);
    }

    .progress-detail {
      text-align: center;
      color: var(--text-muted);
      font-size: 0.9rem;
      margin-top: 0.5rem;
    }

    .live-genres-section {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 1.5rem;
    }

    .live-genres-section h3 {
      margin-bottom: 1rem;
      font-size: 1.1rem;
      color: var(--text);
    }

    .live-genres-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
      gap: 0.75rem;
    }

    .live-genre-card {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.75rem;
      transition: all 0.3s ease;
      animation: fadeInUp 0.3s ease forwards;
    }

    .live-genre-card:hover {
      border-color: var(--accent);
      transform: translateY(-2px);
    }

    .live-genre-emoji {
      font-size: 1.4rem;
      flex-shrink: 0;
    }

    .live-genre-name {
      flex: 1;
      font-size: 0.85rem;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .live-genre-count {
      font-size: 0.75rem;
      color: var(--accent);
      font-weight: 600;
      background: var(--surface);
      padding: 0.2rem 0.5rem;
      border-radius: 10px;
    }

    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Mobile responsive for loading stats */
    @media (max-width: 600px) {
      .loading-stats-row {
        grid-template-columns: repeat(2, 1fr);
      }

      .loading-stat-value {
        font-size: 1.5rem;
      }

      .live-genres-grid {
        grid-template-columns: repeat(2, 1fr);
      }

      .live-genre-card {
        padding: 0.5rem;
      }

      .live-genre-emoji {
        font-size: 1.2rem;
      }

      .live-genre-name {
        font-size: 0.75rem;
      }
    }

    /* === Keyboard Shortcuts Help === */
    .keyboard-help-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1100;
      animation: fadeIn 0.2s ease;
    }

    .keyboard-help-panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 2rem;
      max-width: 400px;
      width: 90%;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
    }

    .keyboard-help-panel h3 {
      margin-bottom: 1.5rem;
      font-size: 1.25rem;
      text-align: center;
    }

    .shortcuts-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-bottom: 1.5rem;
    }

    .shortcut-item {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .shortcut-item kbd {
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 0.25rem 0.5rem;
      font-family: monospace;
      font-size: 0.85rem;
      min-width: 80px;
      text-align: center;
      color: var(--accent);
    }

    .shortcut-item span {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .keyboard-help-panel button {
      width: 100%;
      justify-content: center;
    }

    /* === Accessibility: Screen Reader Only === */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    /* === Focus Visible Styles === */
    :focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .btn:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
      box-shadow: 0 0 0 4px rgba(29, 185, 84, 0.2);
    }

    .genre-checkbox:focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    .search-input:focus-visible {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 0 3px rgba(29, 185, 84, 0.15);
    }

    /* Keyboard hint in search */
    .search-input::placeholder {
      opacity: 0.6;
    }

    /* Skip link for keyboard users */
    .skip-link {
      position: absolute;
      top: -40px;
      left: 0;
      background: var(--accent);
      color: #000;
      padding: 0.5rem 1rem;
      z-index: 9999;
      border-radius: 0 0 8px 0;
      text-decoration: none;
      font-weight: 500;
    }

    .skip-link:focus {
      top: 0;
    }

    /* =========================================
       SIDEBAR LAYOUT
       ========================================= */

    .app-wrapper {
      display: flex;
      flex-direction: column;
      min-height: 100vh;
    }

    .app-header {
      background: var(--surface);
      border-bottom: 1px solid var(--border);
      padding: 1rem 1.5rem;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      max-width: 1600px;
      margin: 0 auto;
      padding-left: 280px; /* Account for fixed sidebar */
    }

    .header-content h1 {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin: 0;
      font-size: 1.5rem;
    }

    .genie-sparkle {
      animation: sparkle 2s ease-in-out infinite;
    }

    @keyframes sparkle {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.5; transform: scale(1.2); }
    }

    .swedish-crowns {
      display: none;
      gap: 0.25rem;
      margin-left: 0.5rem;
    }

    body.swedish-mode .swedish-crowns {
      display: flex;
    }

    body.swedish-mode .genie-sparkle {
      display: none;
    }

    .swedish-crowns .crown {
      font-size: 0.9rem;
      animation: crownBounce 1.5s ease-in-out infinite;
    }

    .swedish-crowns .crown:nth-child(2) {
      animation-delay: 0.2s;
    }

    .swedish-crowns .crown:nth-child(3) {
      animation-delay: 0.4s;
    }

    @keyframes crownBounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-3px); }
    }

    .content-wrapper {
      display: flex;
      flex: 1;
      width: 100%;
      justify-content: center;
    }

    /* === Sidebar === */
    .sidebar {
      width: 280px;
      min-width: 280px;
      background: var(--surface);
      border-right: 1px solid var(--border);
      padding: 1.5rem;
      display: flex;
      flex-direction: column;
      gap: 1.5rem;
      overflow-y: auto;
      height: calc(100vh - 80px);
      position: fixed;
      left: 0;
      top: 80px;
      z-index: 50;
    }

    .sidebar-section {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .sidebar-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin: 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      cursor: help;
    }

    .cache-hint {
      font-size: 0.7rem;
      opacity: 0.5;
      margin-left: auto;
    }

    .sidebar-loading {
      color: var(--text-muted);
      font-size: 0.85rem;
      padding: 0.5rem;
    }

    /* === Pioneer/User List Items === */
    .user-list-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem;
      border-radius: 8px;
      transition: background 0.2s;
    }

    .user-list-item:hover {
      background: var(--surface-2);
    }

    .user-list-item .position {
      font-weight: 700;
      font-size: 0.85rem;
      color: var(--accent);
      min-width: 24px;
    }

    .user-list-item .position.gold {
      color: #FFD700;
    }

    .user-list-item .position.silver {
      color: #C0C0C0;
    }

    .user-list-item .position.bronze {
      color: #CD7F32;
    }

    .user-list-item .user-avatar {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      object-fit: cover;
      background: var(--surface-2);
    }

    .user-list-item .user-avatar-placeholder {
      width: 32px;
      height: 32px;
      border-radius: 50%;
      background: var(--surface-2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
    }

    .user-list-item .user-name {
      flex: 1;
      font-size: 0.9rem;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .user-list-item .regalia {
      font-size: 0.85rem;
    }

    /* Now Playing indicator and tooltip */
    .user-list-item.is-listening {
      position: relative;
    }

    .user-list-item.is-listening::before {
      content: '';
      position: absolute;
      left: -4px;
      top: 50%;
      transform: translateY(-50%);
      width: 6px;
      height: 6px;
      background: var(--accent);
      border-radius: 50%;
      animation: listeningPulse 2s ease-in-out infinite;
    }

    @keyframes listeningPulse {
      0%, 100% { opacity: 1; transform: translateY(-50%) scale(1); }
      50% { opacity: 0.5; transform: translateY(-50%) scale(0.8); }
    }

    .now-playing-tooltip {
      position: absolute;
      left: calc(100% + 12px);
      top: 50%;
      transform: translateY(-50%);
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 0.75rem;
      display: flex;
      align-items: center;
      gap: 0.75rem;
      min-width: 220px;
      max-width: 280px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.2s, visibility 0.2s;
      pointer-events: none;
    }

    .user-list-item.is-listening:hover .now-playing-tooltip {
      opacity: 1;
      visibility: visible;
    }

    .now-playing-tooltip::before {
      content: '';
      position: absolute;
      left: -6px;
      top: 50%;
      transform: translateY(-50%);
      border: 6px solid transparent;
      border-right-color: var(--border);
    }

    .now-playing-tooltip::after {
      content: '';
      position: absolute;
      left: -5px;
      top: 50%;
      transform: translateY(-50%);
      border: 5px solid transparent;
      border-right-color: var(--surface);
    }

    .now-playing-album-art {
      width: 48px;
      height: 48px;
      border-radius: 4px;
      object-fit: cover;
      flex-shrink: 0;
      background: var(--surface-2);
    }

    .now-playing-info {
      flex: 1;
      min-width: 0;
      overflow: hidden;
    }

    .now-playing-label {
      font-size: 0.7rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--accent);
      margin-bottom: 0.25rem;
      display: flex;
      align-items: center;
      gap: 0.35rem;
    }

    .now-playing-track {
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .now-playing-artists {
      font-size: 0.75rem;
      color: var(--text-muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    /* Light mode tooltip adjustments */
    body.light-mode .now-playing-tooltip {
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    /* Swedish mode - use Swedish colors */
    body.swedish-mode .user-list-item.is-listening::before {
      background: var(--swedish-yellow);
    }

    body.swedish-mode .now-playing-label {
      color: var(--swedish-blue);
    }

    /* Pioneer regalia badges */
    .pioneer-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.75rem;
      padding: 0.15rem 0.4rem;
      border-radius: 4px;
      background: linear-gradient(135deg, #FFD700, #FFA500);
      color: #000;
      font-weight: 600;
    }

    .pioneer-badge.first {
      background: linear-gradient(135deg, #FFD700, #FF6B00);
      animation: pulseGlow 2s ease-in-out infinite;
    }

    @keyframes pulseGlow {
      0%, 100% { box-shadow: 0 0 5px rgba(255, 215, 0, 0.5); }
      50% { box-shadow: 0 0 15px rgba(255, 215, 0, 0.8); }
    }

    /* Staggered fade-in animation for sidebar items */
    @keyframes sidebarItemFadeIn {
      from {
        opacity: 0;
        transform: translateX(-10px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .user-list-item.animate-in,
    .playlist-list-item.animate-in {
      animation: sidebarItemFadeIn 0.3s ease-out forwards;
      opacity: 0;
    }

    /* === Recent Playlists === */
    .playlist-list-item {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.5rem;
      border-radius: 8px;
      transition: background 0.2s;
      cursor: pointer;
      text-decoration: none;
      color: inherit;
    }

    .playlist-list-item:hover {
      background: var(--surface-2);
    }

    .playlist-list-item .playlist-icon {
      width: 36px;
      height: 36px;
      border-radius: 6px;
      background: var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1rem;
    }

    .playlist-list-item .playlist-info {
      flex: 1;
      min-width: 0;
    }

    .playlist-list-item .playlist-name {
      font-size: 0.85rem;
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .playlist-list-item .playlist-meta {
      font-size: 0.75rem;
      color: var(--text-muted);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .playlist-list-item .playlist-creator {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .playlist-list-item .creator-avatar {
      width: 14px;
      height: 14px;
      border-radius: 50%;
    }

    /* === Sidebar Toggle (Mobile) === */
    .sidebar-toggle {
      display: none;
      position: fixed;
      left: 0;
      top: 50%;
      transform: translateY(-50%);
      background: var(--surface);
      border: 1px solid var(--border);
      border-left: none;
      border-radius: 0 8px 8px 0;
      padding: 0.75rem 0.5rem;
      cursor: pointer;
      z-index: 99;
      transition: background 0.2s;
    }

    .sidebar-toggle:hover {
      background: var(--surface-2);
    }

    .sidebar-toggle .toggle-icon {
      font-size: 0.9rem;
      transition: transform 0.3s;
    }

    .sidebar.collapsed + .sidebar-toggle .toggle-icon {
      transform: rotate(180deg);
    }

    /* === Main Content with Sidebar === */
    .main-content {
      flex: 1;
      padding: 1.5rem;
      padding-left: calc(280px + 1.5rem); /* Account for fixed sidebar */
      min-width: 0;
      max-width: 1000px;
      margin: 0 auto;
    }

    /* === Scoreboard Button === */
    .sidebar-scoreboard-btn {
      width: 100%;
      justify-content: center;
      margin-top: 1rem;
      margin-bottom: 0;
    }

    /* === Scoreboard Modal === */
    .scoreboard-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1100;
      padding: 1rem;
    }

    .scoreboard-modal.active {
      display: flex;
      animation: fadeIn 0.2s ease;
    }

    .scoreboard-panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      width: 100%;
      max-width: 800px;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .scoreboard-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    .scoreboard-header h2 {
      margin: 0;
      font-size: 1.25rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .scoreboard-tabs {
      display: flex;
      gap: 0.5rem;
      padding: 1rem 1.5rem;
      border-bottom: 1px solid var(--border);
      overflow-x: auto;
      background: var(--surface-2);
    }

    .scoreboard-tab {
      padding: 0.6rem 1.2rem;
      border-radius: 20px;
      background: transparent;
      border: 1.5px solid var(--border);
      cursor: pointer;
      font-size: 0.85rem;
      font-weight: 600;
      color: var(--text-muted);
      white-space: nowrap;
      transition: all 0.25s ease;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .scoreboard-tab:hover {
      background: rgba(30, 215, 96, 0.1);
      border-color: var(--accent);
      color: var(--accent);
      transform: translateY(-1px);
    }

    .scoreboard-tab.active {
      background: linear-gradient(135deg, var(--accent), var(--accent-hover));
      color: #000;
      border-color: transparent;
      box-shadow: 0 4px 12px rgba(30, 215, 96, 0.3);
    }

    .scoreboard-content {
      flex: 1;
      overflow-y: auto;
      padding: 1.5rem;
    }

    .scoreboard-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .scoreboard-entry {
      display: flex;
      align-items: center;
      gap: 1rem;
      padding: 0.85rem 1rem;
      border-radius: 10px;
      background: var(--surface-2);
      border: 1px solid transparent;
      transition: all 0.2s ease;
      position: relative;
      overflow: hidden;
    }

    .scoreboard-entry:hover {
      background: var(--surface);
      border-color: var(--border);
      transform: translateX(4px);
    }

    .scoreboard-entry.top-3::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: linear-gradient(180deg, #FFD700, #FFA500);
    }

    .scoreboard-entry .rank {
      font-weight: 700;
      font-size: 1rem;
      min-width: 36px;
      height: 36px;
      text-align: center;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      background: var(--surface);
    }

    .scoreboard-entry .rank.gold {
      color: #FFD700;
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.2), rgba(255, 165, 0, 0.1));
      border: 1px solid rgba(255, 215, 0, 0.4);
      text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
    }
    .scoreboard-entry .rank.silver {
      color: #C0C0C0;
      background: linear-gradient(135deg, rgba(192, 192, 192, 0.2), rgba(169, 169, 169, 0.1));
      border: 1px solid rgba(192, 192, 192, 0.4);
    }
    .scoreboard-entry .rank.bronze {
      color: #CD7F32;
      background: linear-gradient(135deg, rgba(205, 127, 50, 0.2), rgba(184, 115, 51, 0.1));
      border: 1px solid rgba(205, 127, 50, 0.4);
    }

    .scoreboard-entry .entry-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;
      background: var(--surface);
    }

    .scoreboard-entry .entry-info {
      flex: 1;
    }

    .scoreboard-entry .entry-name {
      font-weight: 500;
    }

    .scoreboard-entry .entry-count {
      font-size: 1.1rem;
      font-weight: 700;
      color: var(--accent);
    }

    .scoreboard-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--border);
      text-align: center;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    /* === Responsive Sidebar === */
    @media (max-width: 1024px) {
      .sidebar {
        position: fixed;
        left: 0;
        top: 80px;
        bottom: 0;
        z-index: 98;
        transform: translateX(0);
        transition: transform 0.3s ease;
        box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2);
      }

      .sidebar.collapsed {
        transform: translateX(-100%);
      }

      .sidebar-toggle {
        display: block;
      }

      .main-content {
        padding-left: 1.5rem;
        max-width: 100%;
      }

      .header-content {
        padding-left: 0;
      }
    }

    @media (max-width: 640px) {
      .app-header {
        padding: 0.75rem 1rem;
      }

      .header-content h1 {
        font-size: 1.25rem;
      }

      .sidebar {
        width: 260px;
        min-width: 260px;
        padding: 1rem;
      }

      .scoreboard-panel {
        border-radius: 12px;
      }

      .scoreboard-tabs {
        padding: 0.75rem 1rem;
      }
    }

    /* === Light Mode Sidebar Overrides === */
    body.light-mode .sidebar {
      background: #ffffff;
      border-right-color: #dee2e6;
    }

    body.light-mode .user-list-item:hover,
    body.light-mode .playlist-list-item:hover {
      background: #f1f3f4;
    }

    body.light-mode .sidebar-toggle {
      background: #ffffff;
      border-color: #dee2e6;
    }

    body.light-mode .sidebar-toggle:hover {
      background: #f1f3f4;
    }

    body.light-mode .scoreboard-entry {
      background: #f1f3f4;
    }

    body.light-mode .scoreboard-tab {
      background: #e9ecef;
      color: #495057;
    }

    body.light-mode .scoreboard-tab:hover {
      background: #dee2e6;
    }

    /* === Swedish Mode Sidebar === */
    body.swedish-mode .pioneer-badge {
      background: linear-gradient(135deg, #FECC00, #006AA7);
      color: #fff;
    }

    body.swedish-mode .user-list-item .position {
      color: #006AA7;
    }

    body.swedish-mode .scoreboard-tab.active {
      background: #006AA7;
      color: #FECC00;
    }

    /* =========================================
       ALBUM ART LOADING ANIMATION
       ========================================= */

    .playlist-loading-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      z-index: 1200;
      animation: fadeIn 0.3s ease;
    }

    .album-carousel {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      margin-bottom: 2rem;
      perspective: 800px;
    }

    .album-art {
      width: 100px;
      height: 100px;
      border-radius: 8px;
      object-fit: cover;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      animation: albumFlip 2s ease-in-out infinite;
      transform-style: preserve-3d;
    }

    .album-art:nth-child(1) { animation-delay: 0s; }
    .album-art:nth-child(2) { animation-delay: 0.2s; }
    .album-art:nth-child(3) { animation-delay: 0.4s; }
    .album-art:nth-child(4) { animation-delay: 0.6s; }
    .album-art:nth-child(5) { animation-delay: 0.8s; }

    @keyframes albumFlip {
      0%, 100% {
        transform: rotateY(0deg) scale(1);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      }
      25% {
        transform: rotateY(180deg) scale(1.1);
        box-shadow: 0 12px 32px rgba(29, 185, 84, 0.4);
      }
      50% {
        transform: rotateY(360deg) scale(1);
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      }
    }

    .album-art.vinyl-mode {
      animation: vinylSpin 3s linear infinite;
      border-radius: 50%;
    }

    @keyframes vinylSpin {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    @keyframes vinylFlip {
      0% {
        transform: rotateY(0deg) scale(1);
      }
      50% {
        transform: rotateY(180deg) scale(1.15);
        filter: brightness(1.2);
      }
      100% {
        transform: rotateY(360deg) scale(1);
      }
    }

    .loading-text {
      font-size: 1.25rem;
      font-weight: 500;
      margin-bottom: 1rem;
      text-align: center;
      min-height: 2rem;
    }

    .loading-progress {
      width: 300px;
      max-width: 80%;
      height: 4px;
      background: var(--surface-2);
      border-radius: 2px;
      overflow: hidden;
    }

    .loading-progress-bar {
      height: 100%;
      background: var(--accent);
      border-radius: 2px;
      transition: width 0.3s ease;
    }

    .loading-stats {
      margin-top: 1.5rem;
      display: flex;
      gap: 2rem;
      font-size: 0.9rem;
      color: var(--text-muted);
    }

    .loading-stat {
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .loading-stat-value {
      font-size: 1.5rem;
      font-weight: 700;
      color: var(--accent);
    }

    /* Celebration overlay */
    .celebration-overlay {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 1300;
    }

    .confetti {
      position: absolute;
      width: 10px;
      height: 10px;
      background: var(--accent);
      animation: confettiFall 3s ease-out forwards;
    }

    @keyframes confettiFall {
      0% {
        opacity: 1;
        transform: translateY(-100px) rotate(0deg);
      }
      100% {
        opacity: 0;
        transform: translateY(100vh) rotate(720deg);
      }
    }

    /* Responsive adjustments */
    @media (max-width: 640px) {
      .album-art {
        width: 60px;
        height: 60px;
      }

      .album-carousel {
        gap: 0.25rem;
      }

      .loading-text {
        font-size: 1rem;
      }

      .loading-stats {
        gap: 1rem;
      }
    }

    /* === Fireworks Celebration === */
    .fireworks-container {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 10000;
      overflow: hidden;
    }

    .firework {
      position: absolute;
      width: 4px;
      height: 4px;
      border-radius: 50%;
      animation: fireworkExplode 1s ease-out forwards;
    }

    @keyframes fireworkExplode {
      0% {
        transform: scale(1);
        opacity: 1;
      }
      100% {
        transform: scale(0);
        opacity: 0;
      }
    }

    .firework-particle {
      position: absolute;
      width: 6px;
      height: 6px;
      border-radius: 50%;
      animation: particleFly 1.2s ease-out forwards;
    }

    @keyframes particleFly {
      0% {
        transform: translate(0, 0) scale(1);
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }

    .celebration-text {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 3rem;
      font-weight: 700;
      color: #fff;
      text-shadow: 0 0 20px rgba(29, 185, 84, 0.8), 0 0 40px rgba(29, 185, 84, 0.6);
      animation: celebrationPop 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
      z-index: 10001;
      pointer-events: none;
    }

    @keyframes celebrationPop {
      0% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
      50% {
        transform: translate(-50%, -50%) scale(1.2);
      }
      100% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }
    }

    .celebration-text.fade-out {
      animation: celebrationFade 0.5s ease-out forwards;
    }

    @keyframes celebrationFade {
      to {
        opacity: 0;
        transform: translate(-50%, -50%) scale(0.8);
      }
    }

    /* === Playlist Customisation Modal === */
    .customise-modal {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 2000;
      padding: 1rem;
      animation: fadeIn 0.2s ease;
    }

    .customise-panel {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      width: 100%;
      max-width: 500px;
      max-height: 90vh;
      overflow-y: auto;
      animation: slideUp 0.3s ease;
    }

    .customise-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .customise-header h3 {
      margin: 0;
      font-size: 1.2rem;
    }

    .customise-close {
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.25rem;
      line-height: 1;
    }

    .customise-close:hover {
      color: var(--text);
    }

    .customise-body {
      padding: 1.5rem;
    }

    .customise-field {
      margin-bottom: 1.25rem;
    }

    .customise-field label {
      display: block;
      font-size: 0.85rem;
      font-weight: 500;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .customise-field input,
    .customise-field textarea {
      width: 100%;
      padding: 0.75rem;
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      color: var(--text);
      font-size: 1rem;
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .customise-field input:focus,
    .customise-field textarea:focus {
      outline: none;
      border-color: var(--accent);
    }

    .customise-field textarea {
      min-height: 80px;
      resize: vertical;
    }

    .customise-field .field-hint {
      font-size: 0.75rem;
      color: var(--text-muted);
      margin-top: 0.25rem;
    }

    .customise-preview {
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1.25rem;
    }

    .customise-preview-title {
      font-size: 0.75rem;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 0.5rem;
    }

    .customise-preview-name {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.25rem;
    }

    .customise-preview-desc {
      font-size: 0.85rem;
      color: var(--text-muted);
      white-space: pre-wrap;
    }

    .customise-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: flex-end;
      gap: 0.75rem;
    }

    .customise-track-count {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--accent);
      color: #000;
      padding: 0.25rem 0.75rem;
      border-radius: 20px;
      font-size: 0.85rem;
      font-weight: 600;
    }

    /* Customise button in genre card */
    .genre-customise {
      padding: 0.25rem 0.5rem;
      font-size: 0.9rem;
      opacity: 0.6;
      transition: opacity 0.2s;
    }

    .genre-customise:hover {
      opacity: 1;
    }

    /* Genre tags for merge modal */
    .genre-tag {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      background: var(--accent);
      color: #000;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 500;
    }

    /* =========================================
       ENHANCED MOBILE ACCESSIBILITY (v3.0)
       Apple HIG: 44px minimum touch targets
       ========================================= */

    @media (max-width: 768px) {
      /* Ensure all interactive elements are tappable */
      button,
      .btn,
      input[type="checkbox"],
      .toggle-icon,
      .sidebar-toggle,
      .scoreboard-tab {
        touch-action: manipulation; /* Faster taps, no double-tap zoom */
      }

      /* Sidebar toggle - make larger and more visible */
      .sidebar-toggle {
        min-width: 44px;
        min-height: 60px;
        padding: 1rem 0.75rem;
      }

      .sidebar-toggle .toggle-icon {
        font-size: 1.25rem;
      }

      /* Sidebar timestamps - increase readability */
      .playlist-list-item .playlist-meta {
        font-size: 0.85rem;
        gap: 0.75rem;
      }

      .playlist-list-item .creator-avatar {
        width: 20px;
        height: 20px;
      }

      /* User list items - larger touch targets */
      .user-list-item {
        min-height: 44px;
        padding: 0.75rem;
      }

      .user-list-item .avatar {
        width: 28px;
        height: 28px;
      }

      /* Scoreboard tabs - ensure tappable */
      .scoreboard-tabs {
        gap: 0.5rem;
      }

      .scoreboard-tab {
        min-height: 44px;
        padding: 0.75rem 1rem;
        font-size: 0.85rem;
      }

      /* Scoreboard entry - larger touch area */
      .scoreboard-entry {
        min-height: 48px;
        padding: 0.75rem;
      }

      .scoreboard-entry .position {
        font-size: 1rem;
        min-width: 28px;
      }

      .scoreboard-entry .avatar {
        width: 28px;
        height: 28px;
      }

      /* Recent playlists list items */
      .playlist-list-item {
        min-height: 52px;
        padding: 0.75rem;
      }

      /* Deploy widget - larger on mobile */
      .deploy-widget {
        min-height: 44px;
        padding: 0.5rem 0.75rem;
        font-size: 0.8rem;
      }

      /* Heidi badge - larger touch target */
      .heidi-badge {
        min-height: 36px;
        padding: 0.5rem 0.75rem;
        font-size: 0.75rem;
      }

      /* Badges and counters - ensure readable */
      .user-counter {
        font-size: 0.85rem;
        padding: 0.5rem 0.75rem;
      }

      /* Loading modal buttons */
      .playlist-loading-modal button {
        min-height: 44px;
        min-width: 120px;
      }

      /* Modal close buttons */
      .modal-close,
      .scoreboard-close {
        min-width: 44px;
        min-height: 44px;
        font-size: 1.5rem;
      }

      /* Genre action buttons - ensure visible always on mobile */
      .genre-hide,
      .genre-create,
      .genre-customise {
        opacity: 1 !important;
        font-size: 1rem;
      }
    }

    /* Extra small screens (iPhone SE etc) */
    @media (max-width: 400px) {
      .sidebar {
        width: 100%;
        min-width: 100%;
      }

      .scoreboard-tabs {
        flex-wrap: wrap;
        justify-content: center;
      }

      .scoreboard-tab {
        flex: 0 1 auto;
        min-width: 70px;
        padding: 0.6rem 0.8rem;
        font-size: 0.75rem;
      }

      /* Stack playlist meta vertically */
      .playlist-list-item .playlist-meta {
        flex-direction: column;
        align-items: flex-start;
        gap: 0.25rem;
      }
    }

    /* Prevent zoom on input focus (iOS) */
    @media (max-width: 768px) {
      input,
      select,
      textarea {
        font-size: 16px !important; /* Prevents iOS zoom */
      }
    }

    /* =========================================
       EASTER EGG: Jeff Goldblum (Konami Code)
       ========================================= */

    .goldblum-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeIn 0.5s ease;
      cursor: pointer;
    }

    .goldblum-overlay.fade-out {
      animation: fadeOut 0.5s ease forwards;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    .goldblum-content {
      text-align: center;
      animation: goldblumSlide 0.8s ease;
    }

    @keyframes goldblumSlide {
      from {
        opacity: 0;
        transform: translateY(20px) scale(0.9);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .goldblum-silhouette {
      font-size: 8rem;
      margin-bottom: 1.5rem;
      animation: goldblumPulse 2s ease-in-out infinite;
    }

    @keyframes goldblumPulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    .goldblum-quote {
      font-size: 2rem;
      font-style: italic;
      color: #fff;
      margin-bottom: 0.5rem;
      text-shadow: 0 0 20px rgba(255, 200, 0, 0.5);
    }

    .goldblum-subtitle {
      font-size: 1rem;
      color: #888;
    }

    /* Mobile adjustments */
    @media (max-width: 768px) {
      .goldblum-silhouette {
        font-size: 5rem;
      }
      .goldblum-quote {
        font-size: 1.25rem;
        padding: 0 1rem;
      }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .goldblum-overlay,
      .goldblum-content,
      .goldblum-silhouette {
        animation: none;
      }
    }

    /* =========================================
       SECRET: Heidi Mode (~oogi~ detection)
       ========================================= */

    /* Heidi greeting overlay */
    .heidi-greeting-overlay {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg, rgba(0, 106, 167, 0.95), rgba(254, 204, 0, 0.95));
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeIn 0.5s ease;
      cursor: pointer;
    }

    .heidi-greeting-overlay.fade-out {
      animation: fadeOut 0.5s ease forwards;
    }

    .heidi-greeting-content {
      text-align: center;
      animation: heidiSlide 0.6s ease;
    }

    @keyframes heidiSlide {
      from {
        opacity: 0;
        transform: scale(0.8) translateY(20px);
      }
      to {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    .heidi-crown {
      font-size: 5rem;
      margin-bottom: 1rem;
      animation: crownSparkle 1.5s ease-in-out infinite;
    }

    @keyframes crownSparkle {
      0%, 100% {
        transform: scale(1) rotate(-5deg);
        filter: drop-shadow(0 0 10px rgba(255, 215, 0, 0.8));
      }
      50% {
        transform: scale(1.1) rotate(5deg);
        filter: drop-shadow(0 0 20px rgba(255, 215, 0, 1));
      }
    }

    .heidi-greeting-text {
      font-size: 1.75rem;
      font-weight: 600;
      color: #fff;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      margin-bottom: 1rem;
    }

    .heidi-hearts {
      font-size: 1.5rem;
      animation: heartsFloat 2s ease-in-out infinite;
    }

    @keyframes heartsFloat {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    /* Heidi mode header crown */
    body.heidi-mode header h1::after {
      content: ' ðŸ‘‘';
      animation: crownSparkle 1.5s ease-in-out infinite;
      display: inline-block;
    }

    /* Heart confetti on playlist creation for Heidi */
    body.heidi-mode .playlist-success::before {
      content: 'ðŸ’™ðŸ’›';
      position: absolute;
      animation: heartBurst 1s ease-out;
    }

    @keyframes heartBurst {
      0% {
        opacity: 1;
        transform: scale(0.5) translateY(0);
      }
      100% {
        opacity: 0;
        transform: scale(2) translateY(-50px);
      }
    }

    /* Anniversary celebration (#102) */
    .heart-rain-container {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9998;
      overflow: hidden;
    }

    .heart-rain-container.fade-out {
      animation: fadeOut 0.5s ease forwards;
    }

    .falling-heart {
      position: absolute;
      top: -50px;
      animation: heartFall linear infinite;
      opacity: 0.9;
      filter: drop-shadow(0 0 3px rgba(255, 255, 255, 0.5));
    }

    @keyframes heartFall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(360deg);
        opacity: 0.3;
      }
    }

    .anniversary-overlay {
      position: fixed;
      inset: 0;
      background: linear-gradient(135deg,
        rgba(0, 106, 167, 0.95) 0%,
        rgba(254, 204, 0, 0.85) 50%,
        rgba(0, 106, 167, 0.95) 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      animation: fadeIn 0.5s ease;
      cursor: pointer;
    }

    .anniversary-overlay.fade-out {
      animation: fadeOut 0.5s ease forwards;
    }

    .anniversary-content {
      text-align: center;
      padding: 3rem;
      animation: anniversaryPop 0.8s cubic-bezier(0.34, 1.56, 0.64, 1);
    }

    @keyframes anniversaryPop {
      0% {
        opacity: 0;
        transform: scale(0.5) rotate(-10deg);
      }
      50% {
        transform: scale(1.1) rotate(5deg);
      }
      100% {
        opacity: 1;
        transform: scale(1) rotate(0);
      }
    }

    .anniversary-hearts {
      font-size: 2rem;
      margin: 1rem 0;
      animation: heartsFloat 2s ease-in-out infinite;
    }

    .anniversary-title {
      color: white;
      font-size: 2.5rem;
      text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      margin: 0.5rem 0;
    }

    .anniversary-message {
      color: white;
      font-size: 1.8rem;
      font-style: italic;
      text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      margin: 1rem 0;
    }

    .anniversary-signature {
      color: rgba(255, 255, 255, 0.9);
      font-size: 1.2rem;
      margin-top: 1.5rem;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .heidi-greeting-overlay,
      .heidi-greeting-content,
      .heidi-crown,
      .heidi-hearts,
      .anniversary-overlay,
      .anniversary-content,
      .anniversary-hearts,
      .falling-heart,
      .heart-rain-container {
        animation: none;
      }
      body.heidi-mode header h1::after {
        animation: none;
      }
    }

    /* =========================================
       CONFETTI CELEBRATION
       ========================================= */

    .confetti-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 9998;
      overflow: hidden;
    }

    .confetti-piece {
      position: absolute;
      top: -10px;
      width: 10px;
      height: 10px;
      border-radius: 2px;
      animation: confettiFall 3s linear forwards;
    }

    @keyframes confettiFall {
      0% {
        transform: translateY(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }

    /* Vary confetti shapes */
    .confetti-piece:nth-child(odd) {
      width: 8px;
      height: 12px;
    }

    .confetti-piece:nth-child(3n) {
      width: 6px;
      height: 6px;
      border-radius: 50%;
    }

    .confetti-piece:nth-child(4n) {
      width: 12px;
      height: 4px;
    }

    /* Add some horizontal movement */
    .confetti-piece:nth-child(2n) {
      animation: confettiFallLeft 3s linear forwards;
    }

    .confetti-piece:nth-child(3n + 1) {
      animation: confettiFallRight 3s linear forwards;
    }

    @keyframes confettiFallLeft {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) translateX(-100px) rotate(720deg);
        opacity: 0;
      }
    }

    @keyframes confettiFallRight {
      0% {
        transform: translateY(0) translateX(0) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) translateX(100px) rotate(-720deg);
        opacity: 0;
      }
    }

    /* Admin Panel Styles */
    .admin-btn {
      background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
      color: #fff !important;
      font-weight: 600;
    }

    .admin-btn:hover {
      background: linear-gradient(135deg, #f7931e 0%, #ff6b35 100%);
      box-shadow: 0 0 15px rgba(247, 147, 30, 0.5);
    }

    .admin-modal .modal-content {
      max-width: 800px;
      background: var(--surface);
    }

    .admin-panel {
      padding: 0;
    }

    .admin-panel .modal-header {
      padding: 1.5rem;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .admin-panel .modal-header h2 {
      margin: 0;
      font-size: 1.5rem;
    }

    .admin-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      padding: 1.5rem;
    }

    @media (max-width: 600px) {
      .admin-grid {
        grid-template-columns: 1fr;
      }
    }

    .admin-card {
      background: var(--card-bg);
      border-radius: 0.75rem;
      padding: 1.25rem;
      border: 1px solid var(--border);
      transition: all 0.2s ease;
      position: relative;
    }

    .admin-card:hover {
      border-color: var(--accent);
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    }

    .admin-card h3 {
      margin: 0 0 1rem 0;
      font-size: 1rem;
      color: var(--text);
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--border);
    }

    .admin-card h3::before {
      content: '';
      display: inline-block;
      width: 4px;
      height: 1rem;
      background: var(--accent);
      border-radius: 2px;
    }

    .admin-stats {
      display: flex;
      flex-direction: column;
      gap: 0.625rem;
    }

    .admin-stats .stat {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.5rem 0.75rem;
      background: var(--surface-2);
      border-radius: 6px;
      transition: all 0.15s ease;
    }

    .admin-stats .stat:hover {
      background: var(--surface);
    }

    .admin-stats .label {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    .admin-stats .value {
      font-weight: 600;
      font-size: 1rem;
      color: var(--accent);
    }

    .admin-actions {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .admin-actions .btn {
      width: 100%;
      justify-content: center;
    }

    .admin-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--border);
      text-align: center;
      color: var(--text-muted);
    }

    body.light-mode .admin-btn {
      background: linear-gradient(135deg, #e65100 0%, #ef6c00 100%);
    }

    body.light-mode .admin-card {
      background: #f5f5f5;
    }

    /* Admin panel KV status colors */
    .admin-stats .value.kv-ok {
      color: var(--success);
    }

    .admin-stats .value.kv-warning {
      color: #f0ad4e;
    }

    .admin-stats .value.kv-critical {
      color: var(--danger);
      font-weight: 700;
    }

    .admin-footer small {
      font-size: 0.75rem;
      line-height: 1.4;
    }

    /* Admin Tabs */
    .admin-tabs {
      display: flex;
      gap: 0.5rem;
      padding: 0 1.5rem;
      border-bottom: 1px solid var(--border);
      margin-bottom: 1rem;
    }

    .admin-tab {
      padding: 0.75rem 1rem;
      background: transparent;
      border: none;
      color: var(--text-muted);
      cursor: pointer;
      font-size: 0.9rem;
      border-bottom: 2px solid transparent;
      margin-bottom: -1px;
      transition: all 0.2s;
    }

    .admin-tab:hover {
      color: var(--text);
    }

    .admin-tab.active {
      color: var(--primary);
      border-bottom-color: var(--primary);
    }

    .admin-tab-content {
      padding: 0 1.5rem;
      max-height: 400px;
      overflow-y: auto;
    }

    /* Admin Users List */
    .admin-users-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      gap: 1rem;
    }

    .admin-search {
      flex: 1;
      max-width: 250px;
      padding: 0.5rem 0.75rem;
      border: 1px solid var(--border);
      border-radius: 6px;
      background: var(--surface);
      color: var(--text);
      font-size: 0.9rem;
    }

    .admin-search:focus {
      outline: none;
      border-color: var(--primary);
    }

    .admin-users-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .admin-user-row {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: var(--surface-2);
      border-radius: 8px;
      transition: background 0.2s;
    }

    .admin-user-row:hover {
      background: var(--surface-3);
    }

    .admin-user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      flex-shrink: 0;
    }

    .admin-user-avatar img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .admin-user-avatar .avatar-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: var(--surface);
      font-size: 1.2rem;
    }

    .admin-user-info {
      flex: 1;
      min-width: 0;
    }

    .admin-user-name {
      font-weight: 500;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .admin-user-meta {
      font-size: 0.8rem;
      color: var(--text-muted);
      display: flex;
      gap: 0.5rem;
      flex-wrap: wrap;
    }

    .admin-delete-user {
      flex-shrink: 0;
      opacity: 0.6;
      transition: opacity 0.2s;
    }

    .admin-user-row:hover .admin-delete-user {
      opacity: 1;
    }

    .btn-danger {
      background: var(--danger);
      color: white;
      border: none;
    }

    .btn-danger:hover {
      background: #c0392b;
    }

    .admin-loading,
    .admin-empty,
    .admin-error {
      text-align: center;
      padding: 2rem;
      color: var(--text-muted);
    }

    .admin-error {
      color: var(--danger);
    }

    /* Admin Error Logs Styles */
    .admin-errors-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .admin-error-entry {
      background: var(--card-bg);
      border-radius: 0.5rem;
      padding: 0.75rem;
      border: 1px solid var(--border);
      transition: border-color 0.2s;
    }

    .admin-error-entry:hover {
      border-color: var(--danger);
    }

    .admin-error-header {
      display: flex;
      gap: 0.75rem;
      align-items: center;
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
    }

    .admin-error-num {
      font-weight: 600;
      color: var(--danger);
    }

    .admin-error-time {
      flex: 1;
    }

    .admin-error-ip {
      font-family: monospace;
      background: var(--surface);
      padding: 0.125rem 0.375rem;
      border-radius: 0.25rem;
    }

    .admin-error-message {
      font-weight: 500;
      color: var(--text);
      margin-bottom: 0.5rem;
      word-break: break-word;
    }

    .admin-error-details {
      margin-top: 0.5rem;
    }

    .admin-error-details summary {
      cursor: pointer;
      color: var(--text-muted);
      font-size: 0.85rem;
      user-select: none;
    }

    .admin-error-details summary:hover {
      color: var(--text);
    }

    .admin-error-stack {
      margin: 0.5rem 0 0 0;
      padding: 0.75rem;
      background: var(--surface);
      border-radius: 0.25rem;
      font-size: 0.75rem;
      overflow-x: auto;
      color: var(--text-muted);
      border: 1px solid var(--border);
    }

    .admin-error-context {
      font-size: 0.85rem;
      color: var(--text-muted);
      font-style: italic;
      margin-top: 0.5rem;
    }

    /* Admin Performance Samples Styles */
    .admin-perf-samples {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      max-height: 300px;
      overflow-y: auto;
    }

    .admin-perf-sample {
      background: var(--surface);
      padding: 0.5rem 0.75rem;
      border-radius: 0.375rem;
      border: 1px solid var(--border);
    }

    .admin-perf-sample-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.85rem;
      margin-bottom: 0.375rem;
    }

    .admin-perf-sample-load {
      font-weight: 600;
      color: var(--accent);
    }

    .admin-perf-sample-bar {
      height: 6px;
      background: var(--border);
      border-radius: 3px;
      overflow: hidden;
    }

    .admin-perf-bar-fill {
      height: 100%;
      background: linear-gradient(90deg, var(--success), var(--accent));
      transition: width 0.3s ease;
    }


    /* Genie Click Animation */
    .genie-mascot.talking {
      filter: sepia(1) saturate(2) hue-rotate(-20deg);
      animation: genieFloat 4s ease-in-out infinite, genieTalk 0.3s ease-in-out 5;
    }

    @keyframes genieTalk {
      0%, 100% {
        transform: scale(1) translateY(0);
      }
      25% {
        transform: scale(1.1, 0.9) translateY(2px);
      }
      50% {
        transform: scale(0.9, 1.1) translateY(-2px);
      }
      75% {
        transform: scale(1.05, 0.95) translateY(1px);
      }
    }

    .genie-mascot:active {
      transform: scale(1.3);
    }

    .genie-speech-bubble {
      position: fixed;
      background: var(--surface);
      border: 2px solid var(--primary);
      border-radius: 1rem;
      padding: 0.75rem 1rem;
      font-size: 0.9rem;
      max-width: 200px;
      z-index: 10001;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      animation: bubbleAppear 0.3s ease-out;
      pointer-events: none;
    }

    .genie-speech-bubble::after {
      content: '';
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 10px solid transparent;
      border-top-color: var(--primary);
    }

    @keyframes bubbleAppear {
      0% {
        opacity: 0;
        transform: scale(0.8) translateY(10px);
      }
      100% {
        opacity: 1;
        transform: scale(1) translateY(0);
      }
    }

    body.swedish-mode .genie-mascot.talking {
      filter: sepia(1) saturate(2) hue-rotate(180deg); /* Blue viking */
    }


    /* Special User Tags */
    .user-tag {
      display: inline-block;
      font-size: 0.65rem;
      padding: 0.15rem 0.4rem;
      border-radius: 0.25rem;
      margin-left: 0.25rem;
      font-weight: 600;
      vertical-align: middle;
    }

    .user-tag.owner {
      background: linear-gradient(135deg, #ff6b35 0%, #f7931e 100%);
      color: white;
    }

    .user-tag.heidi {
      background: linear-gradient(135deg, #006AA7 0%, #FECC00 100%);
      color: white;
    }

    .user-tag.vip {
      background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
      color: white;
    }

    /* Animate special tags */
    .user-tag.heidi {
      animation: heidiShimmer 3s ease-in-out infinite;
    }

    @keyframes heidiShimmer {
      0%, 100% {
        box-shadow: 0 0 5px rgba(254, 204, 0, 0.5);
      }
      50% {
        box-shadow: 0 0 15px rgba(254, 204, 0, 0.8);
      }
    }

    /* Owners section in pioneers list */
    .owners-section {
      margin-bottom: 0.75rem;
      padding-bottom: 0.75rem;
      border-bottom: 1px solid var(--border);
    }

    .owners-header {
      font-size: 0.7rem;
      font-weight: 600;
      color: var(--swedish-yellow, #FECC00);
      margin-bottom: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .owner-item {
      background: linear-gradient(135deg, rgba(0, 106, 167, 0.1) 0%, rgba(254, 204, 0, 0.1) 100%);
      border: 1px solid rgba(254, 204, 0, 0.3);
      border-radius: 0.5rem;
      margin-bottom: 0.25rem;
    }

    /* Pioneer user styling with special tags */
    .pioneer-item.owner-user .pioneer-name,
    .user-entry.owner-user .user-name,
    .user-list-item.owner-user .user-name {
      color: #f7931e;
    }

    .pioneer-item.heidi-user .pioneer-name,
    .user-entry.heidi-user .user-name,
    .user-list-item.heidi-user .user-name {
      color: #FECC00;
    }

    /* Medal badges */
    .pioneer-badge.gold {
      color: #FFD700;
    }
    .pioneer-badge.silver {
      color: #C0C0C0;
    }
    .pioneer-badge.bronze {
      color: #CD7F32;
    }


    /* Genre Merging Styles */
    .merge-toolbar {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem 1rem;
      background: var(--surface);
      border: 1px solid var(--primary);
      border-radius: 0.5rem;
      margin-bottom: 1rem;
      animation: slideIn 0.3s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(-10px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .merge-toolbar .merge-count {
      font-weight: 600;
      color: var(--primary);
    }

    .merge-toolbar .btn {
      margin-left: auto;
    }

    .genre-card.selected-for-merge {
      border-color: var(--primary);
      background: rgba(var(--primary-rgb), 0.1);
      box-shadow: 0 0 10px rgba(var(--primary-rgb), 0.3);
    }

    .genre-card.selected-for-merge::after {
      content: 'âœ“';
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      background: var(--primary);
      color: white;
      width: 1.5rem;
      height: 1.5rem;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.8rem;
      font-weight: bold;
    }

    /* Keyboard navigation focus */
    .genre-item.keyboard-focused {
      outline: 2px solid var(--primary);
      outline-offset: 2px;
      box-shadow: 0 0 0 4px rgba(var(--primary-rgb), 0.2);
    }

    .genre-item.keyboard-focused:not(:has(input:checked)) {
      background: rgba(var(--primary-rgb), 0.05);
    }

    /* Merge modal */
    .merge-modal .modal-content {
      max-width: 500px;
    }

    .merge-preview {
      background: var(--card-bg);
      border-radius: 0.5rem;
      padding: 1rem;
      margin: 1rem 0;
      max-height: 200px;
      overflow-y: auto;
    }

    .merge-preview-item {
      display: flex;
      justify-content: space-between;
      padding: 0.25rem 0;
      border-bottom: 1px solid var(--border);
    }

    .merge-preview-item:last-child {
      border-bottom: none;
    }

    .merge-total {
      margin-top: 1rem;
      padding-top: 0.5rem;
      border-top: 2px solid var(--primary);
      font-weight: 600;
      text-align: right;
    }

    /* ========================================
       UI Redesign v3.3.0 - Modern Polish
       ======================================== */

    /* Improved Card Design */
    .card {
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .card:hover {
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
      transform: translateY(-2px);
    }

    /* Glass morphism for modals */
    .modal {
      backdrop-filter: blur(20px) saturate(1.5);
      -webkit-backdrop-filter: blur(20px) saturate(1.5);
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }

    /* Enhanced Genre Cards */
    .genre-item {
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .genre-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 3px;
      background: var(--accent);
      transform: scaleY(0);
      transition: transform 0.2s ease;
    }

    .genre-item:hover::before {
      transform: scaleY(1);
    }

    .genre-item:hover {
      transform: translateX(4px);
      background: var(--surface);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    /* Better Button Effects */
    .btn {
      position: relative;
      overflow: hidden;
      transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 0;
      height: 0;
      background: rgba(255, 255, 255, 0.2);
      border-radius: 50%;
      transform: translate(-50%, -50%);
      transition: width 0.4s ease, height 0.4s ease;
    }

    .btn:active::after {
      width: 200%;
      height: 200%;
    }

    .btn-primary {
      box-shadow: 0 4px 15px rgba(29, 185, 84, 0.3);
    }

    .btn-primary:hover {
      box-shadow: 0 6px 20px rgba(29, 185, 84, 0.4);
      transform: translateY(-1px);
    }

    /* Improved Sidebar Cards */
    .sidebar-section {
      backdrop-filter: blur(10px);
      transition: all 0.3s ease;
    }

    .sidebar-section:hover {
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
    }

    .pioneer-item, .user-entry, .playlist-entry {
      transition: all 0.2s ease;
      border-radius: 8px;
      padding: 0.5rem;
      margin: -0.25rem;
    }

    .pioneer-item:hover, .user-entry:hover, .playlist-entry:hover {
      background: var(--surface-2);
      transform: scale(1.02);
    }

    /* Better Stats Cards */
    .stat {
      position: relative;
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .stat::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 3px;
      background: linear-gradient(90deg, var(--accent), transparent);
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .stat:hover::before {
      opacity: 1;
    }

    .stat:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
    }

    /* Improved Header */
    header {
      position: relative;
    }

    header h1 {
      font-size: 1.75rem;
      letter-spacing: -0.025em;
      background: linear-gradient(135deg, var(--text) 0%, var(--text-muted) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    body.swedish-mode header h1 {
      background: linear-gradient(135deg, var(--swedish-yellow) 0%, var(--swedish-blue) 100%);
      -webkit-background-clip: text;
      background-clip: text;
    }

    /* Avatar Improvements */
    .avatar {
      border: 2px solid var(--accent);
      transition: all 0.2s ease;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
    }

    .avatar:hover {
      transform: scale(1.1);
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    /* Search Input Polish */
    .search-input {
      transition: all 0.2s ease;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.05);
    }

    .search-input:focus {
      transform: scale(1.01);
      box-shadow: 0 4px 20px rgba(29, 185, 84, 0.15);
    }

    /* Notification Polish */
    .notification {
      backdrop-filter: blur(10px);
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      animation: slideInNotification 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    @keyframes slideInNotification {
      from {
        opacity: 0;
        transform: translateY(-20px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    /* Loading Skeleton Animation */
    @keyframes shimmer {
      0% {
        background-position: -200% 0;
      }
      100% {
        background-position: 200% 0;
      }
    }

    .skeleton {
      background: linear-gradient(
        90deg,
        var(--surface-2) 0%,
        var(--surface) 50%,
        var(--surface-2) 100%
      );
      background-size: 200% 100%;
      animation: shimmer 1.5s ease-in-out infinite;
    }

    /* Improved Scrollbar */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }

    ::-webkit-scrollbar-track {
      background: var(--surface);
      border-radius: 4px;
    }

    ::-webkit-scrollbar-thumb {
      background: var(--border);
      border-radius: 4px;
      transition: background 0.2s ease;
    }

    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-muted);
    }

    /* Selection Color */
    ::selection {
      background: rgba(29, 185, 84, 0.3);
      color: var(--text);
    }

    body.swedish-mode ::selection {
      background: rgba(0, 106, 167, 0.3);
    }

    /* Focus Visible for Accessibility */
    :focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 2px;
    }

    /* Progress Bar Polish */
    .progress-bar, .progress-bar-full {
      overflow: hidden;
    }

    .progress-fill {
      transition: width 0.3s ease;
      box-shadow: 0 0 10px rgba(29, 185, 84, 0.5);
    }

    /* Light Mode Polish */
    body.light-mode .card {
      box-shadow: 0 2px 15px rgba(0, 0, 0, 0.08);
    }

    body.light-mode .card:hover {
      box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12);
    }

    body.light-mode .btn-primary {
      box-shadow: 0 4px 15px rgba(29, 185, 84, 0.25);
    }

    body.light-mode header h1 {
      background: linear-gradient(135deg, #1a1a1a 0%, #4a4a4a 100%);
      -webkit-background-clip: text;
      background-clip: text;
    }

    /* Tooltip Styles */
    [data-tooltip] {
      position: relative;
    }

    [data-tooltip]::before {
      content: attr(data-tooltip);
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%) translateY(-5px);
      padding: 0.5rem 0.75rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 6px;
      font-size: 0.75rem;
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.2s ease;
      z-index: 1000;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    [data-tooltip]:hover::before {
      opacity: 1;
      visibility: visible;
      transform: translateX(-50%) translateY(-8px);
    }

    /* Improved Layout Spacing */
    .main-content-area {
      padding: 1.5rem;
    }

    /* Genre List Improvements */
    .genre-list {
      padding-right: 0.5rem;
    }

    /* Hall of Fame Crown Animation */
    .hof-crown {
      display: inline-block;
      animation: crownBounce 2s ease-in-out infinite;
    }

    @keyframes crownBounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-3px);
      }
    }

    /* Swedish Mode Enhancements */
    body.swedish-mode .btn-primary:hover {
      box-shadow: 0 6px 20px rgba(0, 106, 167, 0.4);
    }

    body.swedish-mode .genre-item::before {
      background: var(--swedish-blue);
    }

    body.swedish-mode .progress-fill {
      box-shadow: 0 0 10px rgba(0, 106, 167, 0.5);
    }


    /* Playlist Scanner Styles */
    .playlist-scanner-btn {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.5rem 1rem;
      background: var(--surface-2);
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      color: var(--text);
      cursor: pointer;
      font-size: 0.85rem;
      transition: all 0.2s ease;
    }

    .playlist-scanner-btn:hover {
      background: var(--surface);
      border-color: var(--accent);
    }

    .playlist-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      animation: fadeIn 0.2s ease;
    }

    .playlist-modal-content {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 1rem;
      padding: 1.5rem;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .playlist-modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--border);
    }

    .playlist-modal-header h2 {
      margin: 0;
      font-size: 1.25rem;
    }

    .playlist-modal-close {
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.25rem;
      line-height: 1;
    }

    .playlist-modal-close:hover {
      color: var(--text);
    }

    .playlist-list {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      max-height: 400px;
      overflow-y: auto;
    }

    .playlist-item {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0.75rem 1rem;
      background: var(--surface-2);
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .playlist-item:hover {
      background: var(--border);
    }

    .playlist-item-info {
      display: flex;
      flex-direction: column;
      gap: 0.25rem;
    }

    .playlist-item-name {
      font-weight: 500;
    }

    .playlist-item-tracks {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .playlist-item-owner {
      font-size: 0.65rem;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .playlist-scan-btn {
      padding: 0.4rem 0.8rem;
      background: var(--accent);
      color: #000;
      border: none;
      border-radius: 0.25rem;
      font-size: 0.8rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .playlist-scan-btn:hover {
      background: var(--accent-hover);
    }

    .playlist-scan-btn:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }

    .scanning-indicator {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--accent);
      font-size: 0.85rem;
    }

    .scanning-indicator .spinner {
      width: 16px;
      height: 16px;
      border: 2px solid var(--accent);
      border-top-color: transparent;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Playlist genres result */
    .playlist-genres-result {
      margin-top: 1rem;
      padding-top: 1rem;
      border-top: 1px solid var(--border);
    }

    .playlist-genres-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .playlist-genres-stats {
      display: flex;
      gap: 1rem;
      font-size: 0.85rem;
      color: var(--text-muted);
    }

    .back-to-playlists-btn {
      padding: 0.4rem 0.8rem;
      background: var(--surface-2);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 0.25rem;
      font-size: 0.8rem;
      cursor: pointer;
    }

    .back-to-playlists-btn:hover {
      background: var(--border);
    }


    /* Tutorial System */
    .tutorial-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.85);
      z-index: 20000;
      display: flex;
      align-items: center;
      justify-content: center;
      animation: fadeIn 0.3s ease;
    }

    .tutorial-spotlight {
      position: absolute;
      border-radius: 0.5rem;
      box-shadow: 0 0 0 9999px rgba(0, 0, 0, 0.85);
      pointer-events: none;
      transition: all 0.3s ease;
    }

    .tutorial-dialog {
      background: var(--surface);
      border: 2px solid var(--accent);
      border-radius: 1rem;
      padding: 1.5rem;
      max-width: 400px;
      width: 90%;
      position: absolute;
      animation: slideUp 0.3s ease;
      z-index: 20001;
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .tutorial-dialog h3 {
      margin: 0 0 0.75rem 0;
      color: var(--accent);
      font-size: 1.1rem;
    }

    .tutorial-dialog p {
      margin: 0 0 1rem 0;
      color: var(--text);
      line-height: 1.5;
    }

    .tutorial-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .tutorial-progress {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    .tutorial-actions {
      display: flex;
      gap: 0.5rem;
    }

    .tutorial-btn {
      padding: 0.5rem 1rem;
      border-radius: 0.5rem;
      font-size: 0.85rem;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .tutorial-btn-skip {
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-muted);
    }

    .tutorial-btn-skip:hover {
      border-color: var(--text-muted);
      color: var(--text);
    }

    .tutorial-btn-next {
      background: var(--accent);
      border: none;
      color: #000;
    }

    .tutorial-btn-next:hover {
      background: var(--accent-hover);
    }

    .tutorial-highlight {
      position: relative;
      z-index: 20002;
      animation: tutorialPulse 2s ease-in-out infinite;
    }

    @keyframes tutorialPulse {
      0%, 100% {
        box-shadow: 0 0 0 0 rgba(29, 185, 84, 0.4);
      }
      50% {
        box-shadow: 0 0 0 10px rgba(29, 185, 84, 0);
      }
    }

    /* Welcome screen */
    .tutorial-welcome {
      text-align: center;
    }

    .tutorial-welcome h2 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .tutorial-welcome .genie-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .tutorial-welcome-actions {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
      margin-top: 1.5rem;
    }

    .tutorial-btn-start {
      background: var(--accent);
      border: none;
      color: #000;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
    }


    /* Rate Limit Warning Banner */
    .rate-limit-banner {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      background: linear-gradient(135deg, #ff4444 0%, #cc0000 100%);
      color: white;
      padding: 0.75rem 1rem;
      text-align: center;
      z-index: 50000;
      animation: slideDown 0.3s ease;
      font-size: 0.9rem;
    }

    .rate-limit-banner.warning {
      background: linear-gradient(135deg, #ff9800 0%, #f57c00 100%);
    }

    .rate-limit-banner a {
      color: white;
      text-decoration: underline;
    }

    .rate-limit-banner .close-btn {
      position: absolute;
      right: 1rem;
      top: 50%;
      transform: translateY(-50%);
      background: none;
      border: none;
      color: white;
      font-size: 1.25rem;
      cursor: pointer;
      opacity: 0.8;
    }

    .rate-limit-banner .close-btn:hover {
      opacity: 1;
    }

    @keyframes slideDown {
      from { transform: translateY(-100%); }
      to { transform: translateY(0); }
    }

    body.has-banner {
      padding-top: 50px;
    }

    /* Invite Request Modal */
    .invite-modal {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100000;
      animation: fadeIn 0.3s ease;
    }

    .invite-modal-content {
      background: var(--surface);
      border: 2px solid var(--accent);
      border-radius: 1.5rem;
      padding: 2rem;
      max-width: 500px;
      width: 90%;
      text-align: center;
    }

    .invite-modal h2 {
      font-size: 1.5rem;
      margin-bottom: 0.5rem;
    }

    .invite-modal .poop-emoji {
      font-size: 4rem;
      margin: 1rem 0;
    }

    .invite-modal p {
      color: var(--text-muted);
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .invite-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .invite-form input, .invite-form textarea {
      padding: 0.75rem 1rem;
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      background: var(--surface-2);
      color: var(--text);
      font-size: 0.95rem;
      width: 100%;
    }

    .invite-form input:focus, .invite-form textarea:focus {
      border-color: var(--accent);
      outline: none;
    }

    .invite-form textarea {
      min-height: 80px;
      resize: vertical;
    }

    .invite-form .btn {
      margin-top: 0.5rem;
    }

    .invite-success {
      background: rgba(29, 185, 84, 0.1);
      border: 1px solid var(--accent);
      border-radius: 0.5rem;
      padding: 1rem;
      margin-top: 1rem;
    }

    .invite-success h3 {
      color: var(--accent);
      margin-bottom: 0.5rem;
    }

    /* Status Page Link */
    .status-link {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-muted);
      font-size: 0.8rem;
      text-decoration: none;
      padding: 0.25rem 0.5rem;
      border-radius: 0.25rem;
      transition: all 0.2s ease;
    }

    .status-link:hover {
      color: var(--accent);
      background: var(--surface-2);
    }

    .status-indicator {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      animation: pulse 2s ease-in-out infinite;
    }

    .status-indicator.warning {
      background: #ff9800;
    }

    .status-indicator.critical {
      background: #ff4444;
    }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }


    /* Will Smith Genie Mode - Deep brown skin tone */
    .genie-mascot.will-smith-mode {
      filter: sepia(1) saturate(4) hue-rotate(350deg) brightness(0.7) contrast(1.1);
      animation: genieFloat 4s ease-in-out infinite, willSmithSlap 0.15s ease-in-out 8;
    }

    @keyframes willSmithSlap {
      0%, 100% {
        transform: translateX(0) rotate(0deg);
      }
      25% {
        transform: translateX(-5px) rotate(-5deg);
      }
      75% {
        transform: translateX(5px) rotate(5deg);
      }
    }

    .genie-mascot.will-smith-mode + .genie-speech-bubble,
    .will-smith-mode ~ .genie-speech-bubble,
    .genie-speech-bubble.will-smith-bubble {
      background: linear-gradient(135deg, #8B4513 0%, #654321 100%);
      border-color: #FFD700;
      font-weight: bold;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /* Health Status Indicator - positioned below status widgets */
    .health-indicator {
      position: fixed;
      top: 6.5rem;
      right: 1rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      padding: 0.4rem 0.75rem;
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 2rem;
      font-size: 0.75rem;
      color: var(--text-muted);
      cursor: pointer;
      z-index: 998;
      transition: all 0.2s ease;
      backdrop-filter: blur(10px);
      opacity: 0.7;
    }

    .health-indicator:hover {
      opacity: 1;
      transform: scale(1.02);
    }

    .health-indicator .health-dot {
      width: 8px;
      height: 8px;
      border-radius: 50%;
      background: var(--accent);
      animation: pulse 2s ease-in-out infinite;
    }

    .health-indicator.healthy .health-dot {
      background: var(--accent);
    }

    .health-indicator.unhealthy .health-dot {
      background: #ff4444;
      animation: pulse 1s ease-in-out infinite;
    }

    .health-indicator .health-text {
      max-width: 150px;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }

    body.light-mode .health-indicator {
      background: var(--surface);
      border: 1px solid var(--border);
    }

    /* Mobile: hide text, show only dot */
    @media (max-width: 768px) {
      .health-indicator .health-text {
        display: none;
      }
      .health-indicator {
        padding: 0.5rem;
      }
    }

    /* ====================================
       Share Modal (#90)
    ==================================== */

    .share-modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      backdrop-filter: blur(5px);
    }

    .share-modal {
      background: var(--surface);
      border-radius: 1rem;
      padding: 2rem;
      max-width: 450px;
      width: 90%;
      max-height: 90vh;
      overflow-y: auto;
      text-align: center;
      position: relative;
      animation: shareModalIn 0.3s ease;
    }

    @keyframes shareModalIn {
      from { transform: scale(0.9); opacity: 0; }
      to { transform: scale(1); opacity: 1; }
    }

    .share-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1.5rem;
      cursor: pointer;
    }

    .share-close:hover {
      color: var(--text);
    }

    .share-modal h3 {
      margin-bottom: 0.5rem;
    }

    .share-playlist-name {
      color: var(--accent);
      font-weight: 600;
      font-size: 1.2rem;
      margin-bottom: 1.5rem;
    }

    .share-qr-container {
      background: white;
      padding: 1rem;
      border-radius: 0.5rem;
      display: inline-block;
      margin-bottom: 1.5rem;
    }

    .share-qr-code {
      width: 150px;
      height: 150px;
    }

    .share-link-container {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1.5rem;
    }

    .share-link-input {
      flex: 1;
      padding: 0.75rem;
      border: 1px solid var(--border);
      border-radius: 0.5rem;
      background: var(--surface-2);
      color: var(--text);
      font-size: 0.85rem;
    }

    .share-copy-btn {
      min-width: 80px;
    }

    .share-social-buttons {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .share-social-btn {
      width: 44px;
      height: 44px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      text-decoration: none;
      font-weight: bold;
      font-size: 1.2rem;
      transition: transform 0.2s;
    }

    .share-social-btn:hover {
      transform: scale(1.1);
    }

    .share-social-btn.twitter {
      background: #000;
      color: white;
    }

    .share-social-btn.facebook {
      background: #1877f2;
      color: white;
    }

    .share-social-btn.whatsapp {
      background: #25d366;
      color: white;
    }

    .share-open-btn {
      width: 100%;
    }

    /* ====================================
       Genre Family Grouping (#79)
    ==================================== */

    .genre-family-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1rem;
      background: var(--surface-2);
      border-radius: 0.75rem;
      margin-bottom: 0.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .genre-family-header:hover {
      background: var(--surface);
    }

    .genre-family-emoji {
      font-size: 1.5rem;
    }

    .genre-family-name {
      font-weight: 600;
      flex: 1;
    }

    .genre-family-count {
      background: var(--accent);
      color: white;
      padding: 0.25rem 0.75rem;
      border-radius: 1rem;
      font-size: 0.85rem;
    }

    .genre-family-toggle {
      color: var(--text-muted);
      transition: transform 0.2s;
    }

    .genre-family-header.collapsed .genre-family-toggle {
      transform: rotate(-90deg);
    }

    .genre-family-content {
      padding-left: 1rem;
      border-left: 2px solid var(--border);
      margin-left: 1rem;
      margin-bottom: 1rem;
      max-height: 1000px;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .genre-family-content.collapsed {
      max-height: 0;
      margin-bottom: 0;
    }

    .view-mode-toggle {
      display: flex;
      gap: 0.5rem;
      margin-bottom: 1rem;
    }

    .view-mode-btn {
      padding: 0.5rem 1rem;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-muted);
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.2s;
    }

    .view-mode-btn.active {
      background: var(--accent);
      color: white;
      border-color: var(--accent);
    }

    /* ====================================
       Artist Breakdown Modal (#78)
    ==================================== */

    .artist-breakdown {
      max-width: 450px;
    }

    .artist-breakdown-subtitle {
      color: var(--text-muted);
      margin-bottom: 1rem;
    }

    .artist-breakdown-list {
      max-height: 300px;
      overflow-y: auto;
    }

    .artist-breakdown-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0.75rem;
      border-bottom: 1px solid var(--border);
    }

    .artist-breakdown-item:last-child {
      border-bottom: none;
    }

    .artist-name {
      font-weight: 500;
    }

    .artist-count {
      color: var(--text-muted);
      font-size: 0.9rem;
    }

    /* Light mode adjustments for new components */
    body.light-mode .share-modal,
    body.light-mode .artist-breakdown {
      border: 1px solid var(--border);
    }

    body.light-mode .share-link-input {
      border: 1px solid var(--border);
    }

    body.light-mode .genre-family-header {
      border: 1px solid var(--border);
    }

    /* ====================================
       Genre Wrapped - Shareable Stats Card
       ==================================== */

    .wrapped-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      transition: opacity 0.3s ease;
      padding: 1rem;
      overflow-y: auto;
    }

    .wrapped-overlay.wrapped-visible {
      opacity: 1;
    }

    .wrapped-container {
      position: relative;
      max-width: 400px;
      width: 100%;
      animation: wrapped-slide-up 0.5s ease-out;
    }

    @keyframes wrapped-slide-up {
      from {
        opacity: 0;
        transform: translateY(40px) scale(0.95);
      }
      to {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    .wrapped-close {
      position: absolute;
      top: -40px;
      right: 0;
      background: none;
      border: none;
      color: white;
      font-size: 2rem;
      cursor: pointer;
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0.7;
      transition: opacity 0.2s;
      z-index: 10;
    }

    .wrapped-close:hover {
      opacity: 1;
    }

    .wrapped-card {
      border-radius: 24px;
      padding: 2rem;
      color: white;
      position: relative;
      overflow: hidden;
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
      aspect-ratio: 9/16;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }

    .wrapped-card::before {
      content: '';
      position: absolute;
      inset: 0;
      background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.15) 0%, transparent 50%),
                  radial-gradient(circle at 70% 80%, rgba(255,255,255,0.1) 0%, transparent 40%);
      pointer-events: none;
    }

    .wrapped-card > * {
      position: relative;
      z-index: 1;
    }

    .wrapped-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
    }

    .wrapped-logo {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .wrapped-logo-icon {
      font-size: 1.5rem;
      filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
    }

    .wrapped-logo-text {
      font-size: 0.9rem;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0.9;
    }

    .wrapped-avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.3);
      object-fit: cover;
    }

    .wrapped-personality {
      text-align: center;
      padding: 1.5rem 0;
    }

    .wrapped-emoji {
      font-size: 4rem;
      display: block;
      margin-bottom: 0.5rem;
      animation: wrapped-bounce 2s ease-in-out infinite;
    }

    @keyframes wrapped-bounce {
      0%, 100% { transform: translateY(0) scale(1); }
      50% { transform: translateY(-10px) scale(1.05); }
    }

    .wrapped-title {
      font-size: 2rem;
      font-weight: 800;
      margin: 0 0 0.5rem;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
      background: linear-gradient(135deg, #fff 0%, rgba(255,255,255,0.8) 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .wrapped-desc {
      font-size: 1rem;
      opacity: 0.9;
      margin: 0;
      line-height: 1.4;
      max-width: 280px;
      margin: 0 auto;
    }

    .wrapped-reading {
      font-size: 0.9rem;
      font-style: italic;
      opacity: 0.85;
      margin: 0.75rem auto 0;
      line-height: 1.5;
      max-width: 260px;
      color: rgba(255, 255, 255, 0.95);
      text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
    }

    .wrapped-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      background: rgba(0, 0, 0, 0.2);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 1rem;
    }

    .wrapped-stat {
      text-align: center;
    }

    .wrapped-stat-value {
      display: block;
      font-size: 1.75rem;
      font-weight: 700;
      line-height: 1;
    }

    .wrapped-stat-label {
      display: block;
      font-size: 0.75rem;
      opacity: 0.7;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-top: 0.25rem;
    }

    .wrapped-top-genres {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .wrapped-top-genres h3 {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 1px;
      opacity: 0.7;
      margin: 0 0 0.5rem;
    }

    .wrapped-genre-bar {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      animation: wrapped-bar-slide 0.6s ease-out backwards;
    }

    @keyframes wrapped-bar-slide {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .wrapped-genre-name {
      font-size: 0.85rem;
      font-weight: 500;
      min-width: 100px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .wrapped-bar-container {
      flex: 1;
      height: 20px;
      background: rgba(255, 255, 255, 0.15);
      border-radius: 10px;
      position: relative;
      overflow: hidden;
    }

    .wrapped-bar-fill {
      height: 100%;
      background: rgba(255, 255, 255, 0.4);
      border-radius: 10px;
      transition: width 1s ease-out;
    }

    .wrapped-bar-count {
      position: absolute;
      right: 8px;
      top: 50%;
      transform: translateY(-50%);
      font-size: 0.7rem;
      font-weight: 600;
      opacity: 0.9;
    }

    .wrapped-fact {
      background: rgba(255, 255, 255, 0.1);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      padding: 1rem;
      text-align: center;
    }

    .wrapped-fact p {
      margin: 0;
      font-style: italic;
      font-size: 0.9rem;
      opacity: 0.9;
    }

    .wrapped-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.8rem;
      opacity: 0.7;
    }

    .wrapped-user {
      font-weight: 500;
    }

    .wrapped-actions {
      display: flex;
      gap: 0.75rem;
      margin-top: 1.5rem;
      justify-content: center;
    }

    .wrapped-actions .btn {
      flex: 1;
      padding: 0.75rem 1rem;
      font-size: 0.9rem;
    }

    /* Toast notification */
    .toast-notification {
      position: fixed;
      bottom: 5rem;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--surface-2);
      color: var(--text);
      padding: 0.75rem 1.5rem;
      border-radius: 50px;
      font-size: 0.9rem;
      font-weight: 500;
      box-shadow: 0 10px 30px rgba(0,0,0,0.3);
      z-index: 100000;
      opacity: 0;
      transition: all 0.3s ease;
      pointer-events: none;
      max-width: 90vw;
      text-align: center;
    }

    .toast-notification.toast-visible {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
      pointer-events: auto;
    }

    /* Mobile adjustments for wrapped card */
    @media (max-width: 480px) {
      .wrapped-card {
        padding: 1.5rem;
        border-radius: 20px;
      }

      .wrapped-title {
        font-size: 1.5rem;
      }

      .wrapped-emoji {
        font-size: 3rem;
      }

      .wrapped-stat-value {
        font-size: 1.5rem;
      }

      .wrapped-genre-name {
        min-width: 80px;
        font-size: 0.75rem;
      }

      .wrapped-actions {
        flex-direction: column;
      }
    }

    /* Share Your Taste button */
    .wrapped-btn {
      background: linear-gradient(135deg, #1db954 0%, #1ed760 50%, #1db954 100%);
      border: none;
      animation: wrapped-btn-glow 3s ease-in-out infinite;
    }

    .wrapped-btn:hover {
      background: linear-gradient(135deg, #1ed760 0%, #22df67 50%, #1ed760 100%);
      transform: scale(1.05);
    }

    @keyframes wrapped-btn-glow {
      0%, 100% { box-shadow: 0 0 10px rgba(29, 185, 84, 0.3); }
      50% { box-shadow: 0 0 20px rgba(29, 185, 84, 0.5); }
    }

    body.swedish-mode .wrapped-btn {
      background: linear-gradient(135deg, #006AA7 0%, #FECC00 50%, #006AA7 100%);
    }

    body.swedish-mode .wrapped-btn:hover {
      background: linear-gradient(135deg, #0077b8 0%, #ffd700 50%, #0077b8 100%);
    }

    /* Request Access Modal */
    .request-access-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      padding: 1rem;
      animation: fadeIn 0.2s ease-out;
    }

    .request-access-modal {
      background: var(--card-bg);
      border-radius: 16px;
      padding: 2rem;
      max-width: 480px;
      width: 100%;
      position: relative;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
      animation: slideUp 0.3s ease-out;
    }

    .request-access-modal .modal-close {
      position: absolute;
      top: 1rem;
      right: 1rem;
      background: transparent;
      border: none;
      color: var(--text-secondary);
      font-size: 1.5rem;
      cursor: pointer;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s;
    }

    .request-access-modal .modal-close:hover {
      background: var(--hover-bg);
      color: var(--text-primary);
    }

    .request-access-modal h2 {
      margin: 0 0 0.5rem;
      font-size: 1.5rem;
      color: var(--text-primary);
    }

    .request-access-modal p {
      margin: 0 0 1.5rem;
      color: var(--text-secondary);
      font-size: 0.95rem;
      line-height: 1.5;
    }

    .request-access-form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .request-access-form .form-group {
      display: flex;
      flex-direction: column;
      gap: 0.375rem;
    }

    .request-access-form label {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text-primary);
    }

    .request-access-form input,
    .request-access-form textarea {
      padding: 0.75rem 1rem;
      border: 1px solid var(--border-color);
      border-radius: 8px;
      background: var(--input-bg);
      color: var(--text-primary);
      font-size: 1rem;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .request-access-form input:focus,
    .request-access-form textarea:focus {
      outline: none;
      border-color: var(--spotify-green);
      box-shadow: 0 0 0 3px rgba(29, 185, 84, 0.2);
    }

    .request-access-form textarea {
      resize: vertical;
      min-height: 80px;
    }

    .request-submit-btn {
      margin-top: 0.5rem;
      padding: 0.875rem 1.5rem;
      font-size: 1rem;
      font-weight: 600;
    }

    .request-submit-btn:disabled {
      opacity: 0.7;
      cursor: not-allowed;
    }

    .request-access-btn {
      margin-top: 1rem;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    /* Light mode adjustments */
    body.light-mode .request-access-modal {
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.2);
    }

    @keyframes slideUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* =========================================
       COMPREHENSIVE REDUCED MOTION SUPPORT
       Respects users who prefer reduced motion
       ========================================= */
    @media (prefers-reduced-motion: reduce) {
      /* Disable all decorative animations globally */
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }

      /* Keep loading spinner visible (essential feedback) */
      .spinner,
      .loading .spinner,
      .progress-spinner {
        animation: spin 0.8s linear infinite !important;
      }

      /* Disable floating/pulsing decorative elements */
      .swedish-crowns .crown,
      .viking-ship,
      .genie-mascot,
      .genie-sparkle,
      .now-playing-equalizer span,
      .heidi-crown,
      .heidi-hearts {
        animation: none !important;
      }

      /* Disable progress bar animations but keep width changes */
      .progress-bar,
      .now-playing-progress-fill {
        transition: none !important;
      }

      /* Disable confetti completely */
      .confetti-piece {
        animation: none !important;
        display: none !important;
      }

      /* Ensure modals appear instantly without animation */
      .modal,
      .overlay,
      .scoreboard-overlay,
      .kv-status-overlay,
      .playlist-modal,
      .request-access-modal {
        animation: none !important;
        opacity: 1 !important;
      }

      /* Disable hover transforms that cause motion */
      .btn:hover,
      .genre-card:hover,
      .stat-box:hover,
      .sidebar-section:hover,
      .pioneer-entry:hover,
      .scoreboard-entry:hover,
      .admin-card:hover {
        transform: none !important;
      }

      /* Keep focus indicators visible but remove motion */
      :focus {
        outline-offset: 2px;
        transition: none !important;
      }
    }

    /* Mobile toast notification */
    @media (max-width: 480px) {
      .toast-notification {
        bottom: 4rem;
        left: 1rem;
        right: 1rem;
        transform: translateX(0) translateY(100px);
        max-width: none;
      }

      .toast-notification.toast-visible {
        transform: translateX(0) translateY(0);
      }
    }

    /* === Error Boundary Modal === */
    .error-boundary-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.8);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      padding: 1rem;
      animation: fadeIn 0.2s ease;
    }

    .error-boundary-modal {
      background: var(--card-bg);
      border-radius: 1rem;
      padding: 2rem;
      max-width: 480px;
      width: 100%;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.4);
      animation: slideUp 0.3s ease;
    }

    @keyframes slideUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .error-boundary-icon {
      font-size: 4rem;
      margin-bottom: 1rem;
    }

    .error-boundary-modal h2 {
      margin: 0 0 0.5rem;
      font-size: 1.5rem;
      color: var(--text);
    }

    .error-boundary-message {
      color: var(--text-muted);
      margin: 0 0 1.5rem;
      font-size: 1rem;
    }

    .error-boundary-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: center;
      flex-wrap: wrap;
      margin-bottom: 1rem;
    }

    .error-retry-btn {
      min-width: 140px;
    }

    .error-report-btn {
      text-decoration: none;
    }

    .error-boundary-details {
      text-align: left;
      margin: 1rem 0;
      background: var(--bg);
      border-radius: 0.5rem;
      padding: 0.75rem;
    }

    .error-boundary-details summary {
      cursor: pointer;
      color: var(--text-muted);
      font-size: 0.875rem;
      user-select: none;
    }

    .error-boundary-details summary:hover {
      color: var(--text);
    }

    .error-boundary-stack {
      margin: 0.75rem 0 0;
      padding: 0.75rem;
      background: var(--card-bg);
      border-radius: 0.25rem;
      font-size: 0.75rem;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-word;
      max-height: 200px;
      overflow-y: auto;
      color: var(--danger);
    }

    .error-dismiss-btn {
      margin-top: 0.5rem;
      font-size: 0.875rem;
    }

    @media (max-width: 480px) {
      .error-boundary-modal {
        padding: 1.5rem;
      }

      .error-boundary-icon {
        font-size: 3rem;
      }

      .error-boundary-actions {
        flex-direction: column;
      }

      .error-retry-btn,
      .error-report-btn {
        width: 100%;
      }
    }

    /* =========================================
       What's New Modal (#104)
       ========================================= */
    .whats-new-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 10000;
      opacity: 0;
      transition: opacity 0.3s ease;
      padding: 1rem;
    }

    .whats-new-overlay.visible {
      opacity: 1;
    }

    .whats-new-panel {
      background: var(--surface);
      border-radius: 1rem;
      max-width: 480px;
      width: 100%;
      max-height: 80vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 0 24px 48px rgba(0, 0, 0, 0.4);
      border: 1px solid var(--border);
      transform: translateY(20px) scale(0.95);
      transition: transform 0.3s ease;
    }

    .whats-new-overlay.visible .whats-new-panel {
      transform: translateY(0) scale(1);
    }

    .whats-new-header {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid var(--border);
    }

    .whats-new-badge {
      background: linear-gradient(135deg, var(--accent), #17a347);
      color: #000;
      font-size: 0.75rem;
      font-weight: 700;
      padding: 0.25rem 0.5rem;
      border-radius: 0.5rem;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      white-space: nowrap;
    }

    .whats-new-header h3 {
      flex: 1;
      margin: 0;
      font-size: 1.125rem;
      color: var(--text);
    }

    .whats-new-close {
      background: none;
      border: none;
      color: var(--text-muted);
      font-size: 1.5rem;
      cursor: pointer;
      padding: 0.5rem;
      margin: -0.5rem;
      line-height: 1;
      transition: color 0.2s;
      min-width: 44px;
      min-height: 44px;
      display: flex;
      align-items: center;
      justify-content: center;
      touch-action: manipulation;
    }

    .whats-new-close:hover {
      color: var(--text);
      background: rgba(255, 255, 255, 0.1);
      border-radius: 50%;
    }

    .whats-new-date {
      padding: 0.75rem 1.5rem 0;
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    .whats-new-changes {
      list-style: none;
      padding: 1rem 1.5rem;
      margin: 0;
      overflow-y: auto;
      flex: 1;
    }

    .whats-new-changes li {
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      padding: 0.625rem 0;
      color: var(--text);
      font-size: 0.9375rem;
      line-height: 1.5;
      border-bottom: 1px solid var(--border);
    }

    .whats-new-changes li:last-child {
      border-bottom: none;
    }

    .whats-new-changes .change-icon {
      flex-shrink: 0;
      font-size: 1rem;
    }

    .whats-new-footer {
      padding: 1rem 1.5rem;
      border-top: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      gap: 1rem;
    }

    .whats-new-dismiss-forever {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-size: 0.875rem;
      color: var(--text-muted);
      cursor: pointer;
    }

    .whats-new-dismiss-forever input[type="checkbox"] {
      accent-color: var(--accent);
      width: 1rem;
      height: 1rem;
    }

    .whats-new-dismiss-forever:hover span {
      color: var(--text);
    }

    .whats-new-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
    }

    .whats-new-actions .btn {
      padding: 0.75rem 1.25rem;
      min-height: 44px;
      touch-action: manipulation;
    }

    /* Swedish mode styling */
    body.swedish-mode .whats-new-badge {
      background: linear-gradient(135deg, var(--swedish-blue), var(--swedish-yellow));
    }

    @media (max-width: 480px) {
      .whats-new-panel {
        max-height: 90vh;
        border-radius: 0.75rem;
      }

      .whats-new-header {
        padding: 1rem;
      }

      .whats-new-changes {
        padding: 0.75rem 1rem;
      }

      .whats-new-footer {
        padding: 0.75rem 1rem;
      }

      .whats-new-actions {
        flex-direction: column;
      }

      .whats-new-actions .btn {
        width: 100%;
        justify-content: center;
      }
    }

    /* KV Monitor Dashboard Styles */
    .status-healthy {
      color: #4ade80 !important;
    }

    .status-warning {
      color: #fbbf24 !important;
    }

    .status-critical {
      color: #ff4444 !important;
    }

    .kv-namespace-table table {
      font-size: 0.9rem;
    }

    .kv-namespace-table th {
      font-weight: 600;
      color: var(--text-muted);
      background: var(--surface-2);
    }

    .kv-namespace-table tbody tr:hover {
      background: var(--surface-2);
    }
